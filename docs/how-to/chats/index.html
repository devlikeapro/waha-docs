<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href="/main.bc38a07753a3bc302a0816d5b0f9af72374aadf3e5d31ab5d6cf744aa9dc7fe70c0a72dd0b0bbcc21ea8a34fedcf3465ce76833aa7c8cd384bf452fd598f583a.css" integrity="sha512-vDigd1OjvDAqCBbVsPmvcjdKrfPl0xq11s90Sqncf+cMCnLdCwu8wh6oo0/tzzRlznaDOqfIzThL9FL9WY9YOg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><base href=/docs/how-to/chats/><link rel=canonical href=/docs/how-to/chats/><title>💬 Chats | WAHA</title>
<meta name=description content="Chats"><link rel=manifest href=/manifest.webmanifest><meta property="og:url" content="/docs/how-to/chats/"><meta property="og:site_name" content="WAHA"><meta property="og:title" content="💬 Chats"><meta property="og:description" content="Chats"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2020-10-06T08:48:45+00:00"><meta property="article:modified_time" content="2020-10-06T08:48:45+00:00"><meta property="og:image" content="/docs/how-to/chats/chats.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/docs/how-to/chats/chats.jpg"><meta name=twitter:title content="💬 Chats"><meta name=twitter:description content="Chats"><meta name=twitter:site content="@getdoks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"/","name":"Whats App HTTP API","position":1},{"@type":"ListItem","item":"/docs/","name":"Docs","position":2},{"@type":"ListItem","item":"/docs/how-to/","name":"How to Guides","position":3},{"@type":"ListItem","name":"Chats","position":4}]}</script><link href=https://unpkg.com/aos@2.3.1/dist/aos.css rel=stylesheet><script src=https://unpkg.com/aos@2.3.1/dist/aos.js></script><script>document.addEventListener("DOMContentLoaded",function(){const t=["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE"],e=new RegExp(`^(${t.join("|")})\\b`);document.querySelectorAll("code.language-http .line .err").forEach(t=>{const n=t.textContent;e.test(n)&&(t.innerHTML=n.replace(e,function(e){return`<span class="http-method http-method-${e.toUpperCase()}">${e}</span>`}))})})</script></head><body class="single section docs"><p>Chats methods.</p><div style="width:200px;max-width:100%;margin:0 auto"><img srcset=data:image/webp;base64,UklGRr4AAABXRUJQVlA4ILIAAAAwBgCdASoVACsAP1mSuU2pJSKhMBVaqSYrCecAw3KZyCRMQtyY5yY4nPe8kgjKifmjZtilZkdXTqBQAP7MYgiOxP6oAQdn3xBWdaqyqHSN6U9W+HM6blzsGunoWMr+93cxftoIOdKzMUhCPXi+2aSxCtUIycpWNz7FHgAFx9vGv6Qc0zlVOdATm+qJKBYbT5Rd8R4prRfwVwCNUt7e9TUz1g1TN0QeiNFZMO5MwcfZAAAA data-srcset="/docs/how-to/chats/chats_hu_b1456ff3b782516f.webp 480w,/docs/how-to/chats/chats_hu_5cb8fa7ecfe29529.webp 576w,/docs/how-to/chats/chats_hu_a7693e46320132da.webp 732w" data-sizes=auto src=/docs/how-to/chats/chats_hu_d4e16bc682692d02.jpg width=732 height=1500 decoding=async fetchpriority=auto loading=lazy alt="WhatsApp Chats" class="lazyload blur-up"></div><h2 id=features>Features</h2><p>Here&rsquo;s the list of features that are available by <a href=/docs/how-to/engines/><strong>🏭 Engines</strong></a>:</p><div></div><details><summary><strong>💬 Chats - API</strong></summary><table><thead><tr><th><strong>API</strong></th><th style=text-align:center>WEBJS</th><th style=text-align:center>NOWEB</th><th style=text-align:center>GOWS</th></tr></thead><tbody><tr><td><strong>Get all chats</strong><br><code>GET /api/{session}/chats</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center>✔️</td></tr><tr><td><strong>Get chats overview</strong><br><code>GET /api/{session}/chats/overview</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center>✔️</td></tr><tr><td><strong>Get chat picture</strong><br><code>GET /api/{session}/chats/{chatId}/picture</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center>✔️</td></tr><tr><td><strong>Unread chat</strong><br><code>POST /api/{session}/chats/{chatId}/unread</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center></td></tr><tr><td><strong>Archive chat</strong><br><code>POST /api/{session}/chats/{chatId}/archive</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center></td></tr><tr><td><strong>Unarchive chat</strong><br><code>POST /api/{session}/chats/{chatId}/unarchive</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center></td></tr><tr><td><strong>Delete chat</strong><br><code>DELETE /api/{session}/chats/{chatId}</code></td><td style=text-align:center>✔️</td><td style=text-align:center></td><td style=text-align:center></td></tr><tr><td><strong>Get messages</strong><br><code>GET /api/{session}/chats/{chatId}/messages</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center>✔️</td></tr><tr><td><strong>Get message by id</strong><br><code>GET /api/{session}/chats/{chatId}/messages/{messageId}</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️¹</td><td style=text-align:center>✔️</td></tr><tr><td><strong>Pin message</strong><br><code>POST /api/{session}/chats/{chatId}/messages/{messageId}/pin</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️</td><td style=text-align:center></td></tr><tr><td><strong>Unpin message</strong><br><code>POST /api/{session}/chats/{chatId}/messages/{messageId}/unpin</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️</td><td style=text-align:center></td></tr><tr><td><strong>Edit message</strong><br><code>PUT /api/{session}/chats/{chatId}/messages/{messageId}</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️</td><td style=text-align:center></td></tr><tr><td><strong>Delete message</strong><br><code>DELETE /api/{session}/chats/{chatId}/messages/{messageId}</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️</td><td style=text-align:center></td></tr><tr><td><strong>Delete all messages</strong><br><code>DELETE /api/{session}/chats/{chatId}/messages</code></td><td style=text-align:center>✔️</td><td style=text-align:center></td><td style=text-align:center></td></tr></tbody></table><ol><li><strong>NOWEB</strong> - you need to <a href=/docs/engines/noweb/#store><strong>Enable Store</strong></a> to get <strong>chats, contacts and messages</strong></li></ol><p><em>If you see the feature is not available in the above list, please <a href=https://github.com/devlikeapro/waha/issues/new/choose>create a feature request</a> or <strong>leave &ldquo;+1&rdquo; comment</strong> on the existing one.</em></p></details><div></div><details><summary><strong>💬 Chats - Events</strong></summary><table><thead><tr><th><strong>Events</strong></th><th style=text-align:center>WEBJS</th><th style=text-align:center>NOWEB</th><th style=text-align:center>GOWS</th></tr></thead><tbody><tr><td><code>chat.archive</code></td><td style=text-align:center>✔️</td><td style=text-align:center></td><td style=text-align:center></td></tr></tbody></table></details><h2 id=api>API</h2><p>Parameters in path that you can find in below endpoints:</p><ul><li><code>{session}</code> - use the session name for Whatsapp instance that you created with <code>POST /api/sessions</code> endpoint</li><li><code>{chatId}</code> - chat id in format <code>123123123123@[c.us|g.us]</code>, <code>c.us</code> for direct chats and <code>g.us</code> for groups.</li></ul><h3 id=get-all-chats>Get all chats</h3><p>Get all chats</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats</span></span></span></code></pre></div></figure></div><h4 id=chats-pagination>Chats Pagination</h4><p>If you see timeout or the request takes too long - consider using <code>limit</code> parameter to get chats in smaller chunks</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats?limit=100&amp;offset=0&amp;sortBy=messageTimestamp&amp;sortOrder=desc</span></span></span></code></pre></div></figure></div><ul><li><code>limit=100</code> - limit the number of chats to return</li><li><code>offset=0</code> - skip the number of chats from the start</li><li><code>sortBy={field}</code> - sort by field<ul><li><code>sortBy=messageTimestamp</code> - sort by last message timestamp</li><li><code>sortBy=id</code> - sort by chat id</li><li><code>sortBy=name</code> - sort by chat name</li></ul></li><li><code>sortOrder=desc|asc</code> - sort order<ul><li><code>desc</code> - descending order (New first, A-Z)</li><li><code>asc</code> - ascending order (Old first, Z-A)</li></ul></li></ul><h3 id=get-chats-overview>Get chats overview</h3><p>Get chats &ldquo;overview&rdquo; - the API that almost all
<a href=/docs/how-to/dashboard/#chat-ui><strong>Chat UI</strong></a>
client needs!</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/overview?limit=20&amp;offset=0</span></span></span></code></pre></div></figure></div><p><strong>Response</strong> contains the main info you need to show in the chat list:</p><ol><li><code>id</code> - chat id</li><li><code>name</code> - chat name (if any)</li><li><code>picture</code> - chat picture (if any)</li><li><code>lastMessage</code> - last message in the chat (if any).</li><li><code>_chat</code> - the structure depends on engine you&rsquo;re using</li></ol><p>⚠️ <code>lastMessage</code> doesn&rsquo;t have media attachments, you need to <a href=#get-message-by-id>get message by id</a> to get media attachments.</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;12312l123@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;John Doe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;picture&#34;</span><span class=p>:</span> <span class=s2>&#34;https://example.com/picture.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;lastMessage&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;true_11111111111@c.us_AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=mi>1667561485</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;from&#34;</span><span class=p>:</span> <span class=s2>&#34;11111111111@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;fromMe&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;to&#34;</span><span class=p>:</span> <span class=s2>&#34;11111111111@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;Hi there!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=err>...</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;_chat&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=err>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></figure></div><p><strong>Pagination</strong>:</p><ul><li><code>limit=100</code> - limit the number of chats to return</li><li><code>offset=0</code> - skip the number of chats from the start</li></ul><h3 id=get-chat-picture>Get chat picture</h3><p>Get chat picture (avatar, profile picture, group image) by chat id</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/{chatId}/picture[?refresh=True]</span></span></span></code></pre></div></figure></div><p><strong>Query</strong></p><ul><li><code>refresh=True</code> - force refresh the picture. By default, we cache it 24 hours. Do not frequently refresh the picture to avoid <code>rate-overlimit</code> error.</li></ul><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Response</span></figcaption><div class=highlight title=Response><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://example.com/picture.jpg&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><ul><li><code>url</code> can be <code>null</code> if there&rsquo;s no picture for the chat</li></ul><h3 id=archive-chat>Archive chat</h3><p>Use the method to archive chat</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/chats/{chatId}/archive</span></span></span></code></pre></div></figure></div><h3 id=unarchive-chat>Unarchive chat</h3><p>Use the method to unarchive chat</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/chats/{chatId}/unarchive</span></span></span></code></pre></div></figure></div><h3 id=unread-chat>Unread chat</h3><p>Mark chat as unread</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/chats/{chatId}/unread</span></span></span></code></pre></div></figure></div><h3 id=delete-chat>Delete chat</h3><p>Use the method to delete chat</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>DELETE /api/{session}/chats/{chatId}</span></span></span></code></pre></div></figure></div><h3 id=get-messages>Get messages</h3><p>Get <strong>10 messages</strong> from the chat</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/{chatId}/messages?limit=10</span></span></span></code></pre></div></figure></div><p>Available parameters:</p><ul><li><code>downloadMedia=true</code> - download media files (images, files) or not</li><li><code>chatId=123@c.us</code> - chatId, phone number<ul><li><code>chatId=all</code> - get messages from all chats (works on <a href=/docs/how-to/engines/#noweb><strong>NOWEB</strong></a> engine only)</li></ul></li><li><code>limit=100</code> - limit the number of chats to return</li><li><code>offset=0</code> - skip the number of chats from the start</li><li><code>filter.timestamp.lte=1727745026</code> - filter messages by timestamp less than or equal to <code>1727745026</code></li><li><code>filter.timestamp.gte=1727745026</code> - filter messages by timestamp greater than or equal to <code>1727745026</code></li><li><code>filter.fromMe=false</code> - filter messages from me (by default shows all messages)</li></ul><p>Get <strong>10 messages</strong> from the chat, skip <strong>downloading media</strong> (images, files)</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/{chatId}/messages?limit=10&amp;downloadMedia=false</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;false_123123@c.us_AAAAAA&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=mi>1727745026</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;from&#34;</span><span class=p>:</span> <span class=s2>&#34;123123@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;fromMe&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;I&#39;m good!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;hasMedia&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ack&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ackName&#34;</span><span class=p>:</span> <span class=s2>&#34;READ&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;replyTo&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;_data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=err>...</span> <span class=c1>// Raw Engine Data
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></figure></div><p>Get <strong>10 messages</strong> from 1727745026 timestamp, not from me</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/{chatId}/messages?limit=10&amp;filter.timestamp.gte=1727745026&amp;filter.fromMe=false</span></span></span></code></pre></div></figure></div><p>👉 If you have more messages - you can set <code>offset</code> flag
(increase it always for <code>limit</code> amount, even if you get less messages)</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/{chatId}/messages?limit=10&amp;offset=10&amp;filter.timestamp.gte=1727745026&amp;filter.fromMe=false</span></span></span></code></pre></div></figure></div><h3 id=get-message-by-id>Get message by id</h3><p>Get message by id</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/chats/{chatId}/messages/{messageId}?downloadMedia=true</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Response</span></figcaption><div class=highlight title=Response><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;false_123123@c.us_AAAAAA&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=mi>1727745026</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;from&#34;</span><span class=p>:</span> <span class=s2>&#34;123123@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;fromMe&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;body&#34;</span><span class=p>:</span> <span class=s2>&#34;I&#39;m good!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;hasMedia&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ack&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;ackName&#34;</span><span class=p>:</span> <span class=s2>&#34;READ&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;replyTo&#34;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;_data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=err>...</span> <span class=c1>// Raw Engine Data
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><ul><li><code>chatId</code> - in format <code>123123123@c.us</code></li><li><code>messageId</code> - must be in format <code>{true|false}_213213@c.us_AAAAAAA</code>)</li><li><code>downloadMedia</code> - download media files (images, files) or not</li></ul><h3 id=pin-message>Pin message</h3><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/chats/{chatId}/messages/{messageId}/pin</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;duration&#34;</span><span class=p>:</span> <span class=mi>86400</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><ul><li>24 hours - <code>duration=86400</code></li><li>7 days - <code>duration=604800</code></li><li>30 days - <code>duration=2592000</code></li></ul><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Response</span></figcaption><div class=highlight title=Response><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=unpin-message>Unpin message</h3><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/chats/{chatId}/messages/{messageId}/unpin</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Response</span></figcaption><div class=highlight title=Response><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;success&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=edit-message>Edit message</h3><p>You can edit <strong>text</strong> messages or <strong>&ldquo;caption&rdquo;</strong> in media messages.</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>PUT /api/{session}/chats/{chatId}/messages/{messageId}</span></span></span></code></pre></div></figure></div><p>👉 Remember to escape <code>@</code> in <code>chatId</code> and <code>messageId</code> with <code>%40</code>.</p><p>So if you want to edit <code>true_123@c.us_AAA</code> message in <code>123@c.us</code> chat you need to send request to:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>PUT /api/{session}/chats/123%40c.us/messages/true_123%40c.us_AAA</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Hello, world!&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=delete-message>Delete message</h3><p>You can delete messages from the chat.</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>DELETE /api/{session}/chats/{chatId}/messages/{messageId}</span></span></span></code></pre></div></figure></div><p>👉 Remember to escape <code>@</code> in <code>chatId</code> and <code>messageId</code> with <code>%40</code>.</p><p>So if you want to delete <code>true_123@c.us_AAA</code> message in <code>123@c.us</code> chat you need to send request to:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>DELETE /api/{session}/chats/123%40c.us/messages/true_123%40c.us_AAA</span></span></span></code></pre></div></figure></div><h3 id=delete-all-messages>Delete all messages</h3><p>Use the method to clear all messages from the chat</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>DELETE /api/{session}/chats/{chatId}/messages </span></span></span></code></pre></div></figure></div><h2 id=events>Events</h2><p>Read more about
<a href=/docs/how-to/events/><strong>🔄 Events</strong></a>.</p><h3 id=chatarchive>chat.archive</h3><p>The <code>chat.archive</code> event is triggered when a chat is archived or unarchived.</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>chat.archive</span></figcaption><div class=highlight title=chat.archive><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;event&#34;</span><span class=p>:</span> <span class=s2>&#34;chat.archive&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;session&#34;</span><span class=p>:</span> <span class=s2>&#34;default&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;payload&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;123123123@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=mi>1667561485</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;archived&#34;</span><span class=p>:</span> <span class=kc>true</span> <span class=err>&lt;==</span> <span class=err>or</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><p>This line is from <code>./layouts/_default/single.html</code>.</p><script async src=/js/bootstrap.c673c84373e66019f7895efc74b3b3b940071832aaa8a85e73218087d535e71b.js integrity="sha256-xnPIQ3PmYBn3iV78dLOzuUAHGDKqqKhecyGAh9U15xs="></script><script async src=/js/app.c17553444ec7c62f781ddbaa011948f6d85a1bab49420047d68a2b89852a8b36.js integrity="sha256-wXVTRE7Hxi94HduqARlI9thaG6tJQgBH1ooriYUqizY="></script><script async src=/js/docsearch.cfae25fd02560b1d08c4065fa744efbf59bdaf3e4d6a7bf8652794f322a813c9.js integrity="sha256-z64l/QJWCx0IxAZfp0Tvv1m9rz5Nanv4ZSeU8yKoE8k="></script></body></html>