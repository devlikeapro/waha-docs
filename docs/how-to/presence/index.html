<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href="/main.bc38a07753a3bc302a0816d5b0f9af72374aadf3e5d31ab5d6cf744aa9dc7fe70c0a72dd0b0bbcc21ea8a34fedcf3465ce76833aa7c8cd384bf452fd598f583a.css" integrity="sha512-vDigd1OjvDAqCBbVsPmvcjdKrfPl0xq11s90Sqncf+cMCnLdCwu8wh6oo0/tzzRlznaDOqfIzThL9FL9WY9YOg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><base href=/docs/how-to/presence/><link rel=canonical href=/docs/how-to/presence/><title>✅ Presence | WAHA</title>
<meta name=description content="Presence - online, offline, typing status"><link rel=manifest href=/manifest.webmanifest><meta property="og:url" content="/docs/how-to/presence/"><meta property="og:site_name" content="WAHA"><meta property="og:title" content="✅ Presence"><meta property="og:description" content="Presence - online, offline, typing status"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2020-10-06T08:48:45+00:00"><meta property="article:modified_time" content="2020-10-06T08:48:45+00:00"><meta property="og:image" content="/docs/how-to/presence/typing.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/docs/how-to/presence/typing.jpg"><meta name=twitter:title content="✅ Presence"><meta name=twitter:description content="Presence - online, offline, typing status"><meta name=twitter:site content="@getdoks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"/","name":"Whats App HTTP API","position":1},{"@type":"ListItem","item":"/docs/","name":"Docs","position":2},{"@type":"ListItem","item":"/docs/how-to/","name":"How to Guides","position":3},{"@type":"ListItem","name":"Presence","position":4}]}</script><link href=https://unpkg.com/aos@2.3.1/dist/aos.css rel=stylesheet><script src=https://unpkg.com/aos@2.3.1/dist/aos.js></script><script>document.addEventListener("DOMContentLoaded",function(){const t=["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE"],e=new RegExp(`^(${t.join("|")})\\b`);document.querySelectorAll("code.language-http .line .err").forEach(t=>{const n=t.textContent;e.test(n)&&(t.innerHTML=n.replace(e,function(e){return`<span class="http-method http-method-${e.toUpperCase()}">${e}</span>`}))})})</script></head><body class="single section docs"><p>You can get presence information (online, offline with last seen, typing status) for a contact if they share their
presence information.</p><div style="width:400px;max-width:100%;margin:0 auto"><img srcset=data:image/webp;base64,UklGRnAAAABXRUJQVlA4IGQAAACQAwCdASoVAAwAP1mOtkspJSKYBACTFYT1ABd/4CiRppz9GdCAAPYVVxA8/DMtvBOwBNluQVKA+NX/rJ7CnYMZ8oTLiOkhBmqEw55ToglF26DDX1kyc7MzX3ZlRjQM+w1OwAAA data-srcset="/docs/how-to/presence/typing_hu_344ce0fc6b5a1db5.webp 300w" data-sizes=auto src=/docs/how-to/presence/typing_hu_fc834dfee9ae1dd4.jpg width=300 height=168 decoding=async fetchpriority=auto loading=lazy alt="WhatsApp Typing" class="lazyload blur-up"></div><h2 id=faq>FAQ</h2><p>👉 <strong>I don&rsquo;t get notifications on my phone when WAHA session is connected</strong></p><ul><li>You need to send <code>offline</code> after all presence you send (WhatsApp doesn&rsquo;t send notifications to the device if a web client is active).</li><li>For <a href=/docs/engines/noweb/><strong>🏭 NOWEB Engine</strong></a> also mark sure to send <code>markOnline: false</code>
when you create a new session.</li></ul><h2 id=features>Features</h2><p>Here&rsquo;s the list of features that are available by <a href=/docs/how-to/engines/><strong>🏭 Engines</strong></a>:</p><div></div><details><summary><strong>✅ Presence - API</strong></summary><table><thead><tr><th><strong>API</strong></th><th style=text-align:center>WEBJS</th><th style=text-align:center>NOWEB</th><th style=text-align:left>GOWS</th></tr></thead><tbody><tr><td><code>POST /api/{session}/presence</code></td><td style=text-align:center>✔️</td><td style=text-align:center>✔️</td><td style=text-align:left>✔️</td></tr><tr><td><code>GET /api/{session}/presence</code></td><td style=text-align:center></td><td style=text-align:center>✔️</td><td style=text-align:left>✔️</td></tr><tr><td><code>GET /api/{session}/presence/{chatId}</code></td><td style=text-align:center></td><td style=text-align:center>✔️</td><td style=text-align:left>✔️</td></tr><tr><td><code>POST /api/{session}/presence/{chatId}/subscribe</code></td><td style=text-align:center></td><td style=text-align:center>✔️</td><td style=text-align:left>✔️</td></tr></tbody></table><p><em>If you see the feature is not available in the above list, please <a href=https://github.com/devlikeapro/waha/issues/new/choose>create a feature request</a> or <strong>leave &ldquo;+1&rdquo; comment</strong> on the existing one.</em></p></details><h2 id=api>API</h2><p>See the list of engines <a href=/docs/how-to/engines/#features><strong>that support the feature -></strong></a>.</p><h3 id=set-presence>Set presence</h3><p>You can set your global or chat-related presence with endpoint</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/presence</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;chatId&#34;</span><span class=p>:</span> <span class=s2>&#34;111111111@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;presence&#34;</span><span class=p>:</span> <span class=s2>&#34;typing&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><p>Possible presence statuses that you can set or get for chats:</p><ul><li><code>online</code> - send the status with no <code>chatId</code></li><li><code>offline</code> - send the status with no <code>chatId</code></li><li><code>typing</code> - <code>chatId</code> required</li><li><code>recording</code> - <code>chatId</code> required</li><li><code>paused</code> - resets the chat presence after you were <code>typing</code>. <code>chatId</code> required.</li></ul><p><strong>Start typing</strong> to a chat (you can use <code>POST /startTyping</code> instead)</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;chatId&#34;</span><span class=p>:</span> <span class=s2>&#34;111111111@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;presence&#34;</span><span class=p>:</span> <span class=s2>&#34;typing&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>Clear &ldquo;typing&rdquo; state</strong> (you can use <code>POST /stopTyping</code> instead)</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;chatId&#34;</span><span class=p>:</span> <span class=s2>&#34;111111111@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;presence&#34;</span><span class=p>:</span> <span class=s2>&#34;paused&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>Set global &ldquo;online&rdquo;</strong>, all contacts will see it</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;presence&#34;</span><span class=p>:</span> <span class=s2>&#34;online&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><p>💡 In the multi-device version of WhatsApp - if a desktop client is active, WhatsApp doesn&rsquo;t send push notifications
to the device.
If you would like to receive said notifications - you need to mark a session&rsquo;s presence as <code>offline</code>.</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Body</span></figcaption><div class=highlight title=Body><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;presence&#34;</span><span class=p>:</span> <span class=s2>&#34;offline&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=get-all-chats-presence>Get all chats presence</h3><p>You can get all presence information available for a session by calling</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /api/{session}/presence</span></span></span></code></pre></div></figure></div><p>It returns both groups&rsquo; and personal chats&rsquo; presence information.</p><p>Here&rsquo;s few notes about fields:</p><ul><li><code>chatId</code> - either contact id (<code>213213213@c.us</code>) or group chat id (<code>1111111111111@g.us</code>).</li><li><code>lastSeen</code> - contains Unix timestamps indicating when a participant was last online</li><li><code>lastKnownPresence</code> - contains the last known presence status, which can be
<code>offline</code>, <code>online</code>, <code>typing</code>, <code>recording</code>, or <code>paused</code></li></ul><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Response</span></figcaption><div class=highlight title=Response><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;2132132130@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;presences&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;participant&#34;</span><span class=p>:</span> <span class=s2>&#34;2132132130@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;lastKnownPresence&#34;</span><span class=p>:</span> <span class=s2>&#34;offline&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;lastSeen&#34;</span><span class=p>:</span> <span class=mi>1686719326</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;11111111111111111111111@g.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;presences&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;participant&#34;</span><span class=p>:</span> <span class=s2>&#34;11111111111111111111111@g.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;lastKnownPresence&#34;</span><span class=p>:</span> <span class=s2>&#34;online&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;lastSeen&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;participant&#34;</span><span class=p>:</span> <span class=s2>&#34;2132132130@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;lastKnownPresence&#34;</span><span class=p>:</span> <span class=s2>&#34;offline&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;lastSeen&#34;</span><span class=p>:</span> <span class=mi>1686719326</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></figure></div><h3 id=get-chat-presence>Get chat presence</h3><p>To get presence information for a single chat - call <code>GET /api/{session}/presence/{chatId}</code>.
For a group, you&rsquo;ll get participants&rsquo; statuses.</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>Response</span></figcaption><div class=highlight title=Response><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;2132132130@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;presences&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;participant&#34;</span><span class=p>:</span> <span class=s2>&#34;2132132130@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;lastKnownPresence&#34;</span><span class=p>:</span> <span class=s2>&#34;online&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;lastSeen&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=subscribe-to-presence>Subscribe to presence</h3><p>You can subscribe to presence information by calling</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>POST /api/{session}/presence/{chatId}/subscribe</span></span></span></code></pre></div></figure></div><p>(no body required).</p><p>You can get later presence information for the chat with above <code>GET</code> endpoints or by listening to <code>presence.update</code>
webhook.</p><h2 id=events>Events</h2><p>Read more about
<a href=/docs/how-to/events/><strong>🔄 Events</strong></a>.</p><h3 id=presenceupdate>presence.update</h3><p>You can subscribe to <code>presence.update</code> webhook event to get the most recent presence information.</p><div class=expressive-code><figure class="frame has-title not-content"><figcaption class=header><span class=title>presence.update</span></figcaption><div class=highlight title=presence.update><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;event&#34;</span><span class=p>:</span> <span class=s2>&#34;presence.update&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;session&#34;</span><span class=p>:</span> <span class=s2>&#34;default&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;payload&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;111111111111111111@g.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;presences&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;participant&#34;</span><span class=p>:</span> <span class=s2>&#34;11111111111@c.us&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;lastKnownPresence&#34;</span><span class=p>:</span> <span class=s2>&#34;typing&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;lastSeen&#34;</span><span class=p>:</span> <span class=kc>null</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;engine&#34;</span><span class=p>:</span> <span class=s2>&#34;NOWEB&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></figure></div><p>This line is from <code>./layouts/_default/single.html</code>.</p><script async src=/js/bootstrap.c673c84373e66019f7895efc74b3b3b940071832aaa8a85e73218087d535e71b.js integrity="sha256-xnPIQ3PmYBn3iV78dLOzuUAHGDKqqKhecyGAh9U15xs="></script><script async src=/js/app.c17553444ec7c62f781ddbaa011948f6d85a1bab49420047d68a2b89852a8b36.js integrity="sha256-wXVTRE7Hxi94HduqARlI9thaG6tJQgBH1ooriYUqizY="></script><script async src=/js/docsearch.cfae25fd02560b1d08c4065fa744efbf59bdaf3e4d6a7bf8652794f322a813c9.js integrity="sha256-z64l/QJWCx0IxAZfp0Tvv1m9rz5Nanv4ZSeU8yKoE8k="></script></body></html>