<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href="/main.bc38a07753a3bc302a0816d5b0f9af72374aadf3e5d31ab5d6cf744aa9dc7fe70c0a72dd0b0bbcc21ea8a34fedcf3465ce76833aa7c8cd384bf452fd598f583a.css" integrity="sha512-vDigd1OjvDAqCBbVsPmvcjdKrfPl0xq11s90Sqncf+cMCnLdCwu8wh6oo0/tzzRlznaDOqfIzThL9FL9WY9YOg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><base href=/docs/how-to/security/><link rel=canonical href=/docs/how-to/security/><title>ðŸ”’ Security | WAHA</title>
<meta name=description content="Security"><link rel=manifest href=/manifest.webmanifest><meta property="og:url" content="/docs/how-to/security/"><meta property="og:site_name" content="WAHA"><meta property="og:title" content="ðŸ”’ Security"><meta property="og:description" content="Security"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2020-10-06T08:48:45+00:00"><meta property="article:modified_time" content="2020-10-06T08:48:45+00:00"><meta property="og:image" content="/docs/how-to/security/swagger-basic-auth.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/docs/how-to/security/swagger-basic-auth.png"><meta name=twitter:title content="ðŸ”’ Security"><meta name=twitter:description content="Security"><meta name=twitter:site content="@getdoks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"/","name":"Whats App HTTP API","position":1},{"@type":"ListItem","item":"/docs/","name":"Docs","position":2},{"@type":"ListItem","item":"/docs/how-to/","name":"How to Guides","position":3},{"@type":"ListItem","name":"Security","position":4}]}</script><link href=https://unpkg.com/aos@2.3.1/dist/aos.css rel=stylesheet><script src=https://unpkg.com/aos@2.3.1/dist/aos.js></script><script>document.addEventListener("DOMContentLoaded",function(){const t=["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE"],e=new RegExp(`^(${t.join("|")})\\b`);document.querySelectorAll("code.language-http .line .err").forEach(t=>{const n=t.textContent;e.test(n)&&(t.innerHTML=n.replace(e,function(e){return`<span class="http-method http-method-${e.toUpperCase()}">${e}</span>`}))})})</script></head><body class="single section docs"><div class="callout callout-caution d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="outline/shield-check svg-inline callout-icon me-2 mb-3" id="svg-shield-check" role="img"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11.46 20.846A12 12 0 013.5 6 12 12 0 0012 3a12 12 0 008.5 3 12 12 0 01-.09 7.06"/><path d="M15 19l2 2 4-4"/></svg><div class=callout-content><div class=callout-title><p>Do not expose WhatsApp API on public networks!</p></div><div class=callout-body><p>We do not recommend exposing the API on any public networks!</p><p>Either protect the API with <a href=#api-security><strong>Api Key</strong></a> or deny access by using firewalls.</p></div></div></div><p>ðŸ‘‰ Built-in security is available in <a href=/docs/how-to/waha-plus/#plus><strong>WAHA Plus</strong></a> version.</p><h2 id=swagger-security>Swagger Security</h2><h3 id=username-and-password>Username and password</h3><p>If you want to hide the project Swagger panel under the password - run the following command to hide under <code>admin/admin</code>
login and password.</p><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -it -e <span class=nv>WHATSAPP_SWAGGER_USERNAME</span><span class=o>=</span>admin -eWHATSAPP_SWAGGER_PASSWORD<span class=o>=</span>admin devlikeapro/waha-plus</span></span></code></pre></div></figure></div><p>Open http://localhost:3000/ and enter <code>admin / admin</code> in the inputs:</p><p><img src=/docs/how-to/security/swagger-basic-auth_hu_973064e09ec35ffd.webp width=1397 height=479 decoding=async fetchpriority=auto loading=lazy alt=alt id=h-rh-i-0></p><div class="callout callout-note d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3"><div class=callout-content><div class=callout-body><p>Protecting Swagger under the password does not protect your API from other request! Use both techniques to protect your API and Swagger!</p></div></div></div><h3 id=disable-swagger>Disable Swagger</h3><p>You also can hide swagger completely by setting <code>WHATSAPP_SWAGGER_ENABLED=false</code> environment variable.</p><div class="callout callout-note d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3"><div class=callout-content><div class=callout-body><p>Disabling Swagger does not protect the API, please use API security as well</p></div></div></div><h3 id=swagger-white-label>Swagger White Label</h3><p>You can also set <a href=/docs/how-to/swagger/#white-label>Swagger White Label</a>
options instead of hiding the Swagger panel.</p><h2 id=dashboard-security>Dashboard Security</h2><p>When running WAHA you can set the following environment variables to configure the dashboard:</p><ul><li><code>WAHA_DASHBOARD_ENABLED=true</code> - enable or disable the dashboard, by default <code>true</code>. Set to <code>false</code> to disable the dashboard.</li><li><code>WAHA_DASHBOARD_USERNAME=waha</code> - username used to log in, by default <code>admin</code> or <code>waha</code></li><li><code>WAHA_DASHBOARD_PASSWORD=waha</code> - password used to log in, by default <code>admin</code> or <code>waha</code>.</li></ul><p>Read more about <a href=/docs/how-to/dashboard/><strong>Dashboard -></strong></a></p><h2 id=api-security>API security</h2><p>You can protect the API by requiring Api Key in a request&rsquo;s headers.</p><div class="callout callout-note d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3"><div class=callout-content><div class=callout-body><p>Api Key does not hide your Swagger documentation. Please have a look at the previous section to find how to hide Swagger under the password.</p></div></div></div><h3 id=set-api-key>Set Api Key</h3><p>Set <code>WHATSAPP_API_KEY=yoursecretkey</code> environment variable for that:</p><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -it -e <span class=nv>WHATSAPP_API_KEY</span><span class=o>=</span>yoursecretkey devlikeapro/waha-plus</span></span></code></pre></div></figure></div><h3 id=use-api-key-in-swagger>Use Api-Key in Swagger</h3><p>After you set api key - to authorize on swagger use <strong>Authorize</strong> button at the top:
<img src=/docs/how-to/security/swagger-auth_hu_a0db220d675af1c1.webp width=1510 height=739 decoding=async fetchpriority=auto loading=lazy alt=alt id=h-rh-i-1></p><h3 id=add-x-api-key-header>Add X-Api-Key header</h3><p>To authorize requests - set <code>X-Api-Key</code> header to <code>yoursecretkey</code> for all requests that go to WAHA.</p><h4 id=python>Python</h4><p>Example for Python <strong>requests</strong> library:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;Content-type&#39;</span><span class=p>:</span> <span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;X-Api-Key&#39;</span><span class=p>:</span> <span class=s1>&#39;yoursecretkey&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;http://localhost:3000/api/sessions&#34;</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span></span></span></code></pre></div></figure></div><h3 id=exclude-endpoints>Exclude endpoints</h3><p>If you need to exclude some endpoints (like <code>GET /health</code> or <code>GET /ping</code>) from the API Key requirement - you can
set <code>WHATSAPP_API_KEY_EXCLUDE_PATH</code> environment variable with a comma-separated list of endpoints (no <code>/</code> at the beginning).</p><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -it <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> -e <span class=nv>WHATSAPP_API_KEY_EXCLUDE_PATH</span><span class=o>=</span><span class=s2>&#34;health,ping&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> -e <span class=nv>WHATSAPP_API_KEY</span><span class=o>=</span>yoursecretkey <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span> devlikeapro/waha-plus</span></span></code></pre></div></figure></div><h2 id=webhook-security>Webhook security</h2><p>To make sure that you get a webhook from your WAHA instance - you can use <strong>HMAC authentication</strong>.</p><p>Read more about
<a href=/docs/how-to/events/#hmac-authentication><strong>ðŸ”„ Events</strong></a>.</p><h2 id=https>HTTPS</h2><p>After you set up the security options - you should set up HTTPS to protect the data in transit and prevent <a href=https://en.wikipedia.org/wiki/Man-in-the-middle_attack>Man-in-the-middle attacks</a>.
That&rsquo;s fine to run it on the <strong>local network</strong> without HTTPS, but for <strong>the production</strong> environment, HTTPS is a must-have.</p><div class="callout callout-tip d-flex flex-row mt-4 mb-4 pt-4 pe-4 pb-2 ps-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="outline/info-circle svg-inline callout-icon me-2 mb-3" id="svg-info-circle" role="img"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1018 0A9 9 0 003 12"/><path d="M12 9h.01"/><path d="M11 12h1v4h1"/></svg><div class=callout-content><div class=callout-title><p>Use Reverse Proxy</p></div><div class=callout-body><p>We recommend handling HTTPS termination with a reverse proxy like Nginx.</p><p>Follow
<a href=/docs/how-to/install/><strong>ðŸ”§ Install & Update - Additional Steps</strong></a> to set up Nginx with Let&rsquo;s Encrypt (it&rsquo;s free).</p></div></div></div><h3 id=environment-variables>Environment variables</h3><p>WAHA supports HTTPS out of the box, if you don&rsquo;t want to use a reverse proxy like Nginx.</p><p>You can set up the following environment variables to enable HTTPS:</p><ul><li><code>WAHA_HTTPS_ENABLED=true</code>: Set this variable to <code>true</code> to enable HTTPS. By default, it&rsquo;s <code>false</code>.</li><li><code>WAHA_HTTPS_PATH_KEY=/path/to/key.pem</code>: The path to the key file for HTTPS. By default <code>./.secrets/privkey.pem</code></li><li><code>WAHA_HTTPS_PATH_CERT=/path/to/cert.pem</code>: The path to the certificate file for HTTPS. By default <code>./.secrets/cert.pem</code></li><li><code>WAHA_HTTPS_PATH_CA=/path/to/ca.pem</code>: The path to the CA file for HTTPS. By default <code>./.secrets/chain.pem</code></li></ul><h3 id=how-to-set-up-https>How to set up HTTPS</h3><p>Here&rsquo;s available options how you can set up HTTPS:</p><ol><li><strong>Self-signed certificate</strong> - generate a self-signed certificate and use it for HTTPS.</li><li><strong>Let&rsquo;s Encrypt</strong> - use <a href=https://certbot.eff.org/>Certbot</a> to get a free certificate from Let&rsquo;s Encrypt.</li><li><strong>Using reverse proxy</strong> - use Nginx or Apache as a reverse proxy and set up HTTPS there.</li></ol><p>ðŸ‘‰ Here&rsquo;s <a href=/blog/setting-up-https-for-waha/><strong>Step-by-step guide on how to set up HTTPS for WAHA</strong></a></p><p>This line is from <code>./layouts/_default/single.html</code>.</p><script async src=/js/bootstrap.c673c84373e66019f7895efc74b3b3b940071832aaa8a85e73218087d535e71b.js integrity="sha256-xnPIQ3PmYBn3iV78dLOzuUAHGDKqqKhecyGAh9U15xs="></script><script async src=/js/app.c17553444ec7c62f781ddbaa011948f6d85a1bab49420047d68a2b89852a8b36.js integrity="sha256-wXVTRE7Hxi94HduqARlI9thaG6tJQgBH1ooriYUqizY="></script><script async src=/js/docsearch.cfae25fd02560b1d08c4065fa744efbf59bdaf3e4d6a7bf8652794f322a813c9.js integrity="sha256-z64l/QJWCx0IxAZfp0Tvv1m9rz5Nanv4ZSeU8yKoE8k="></script></body></html>