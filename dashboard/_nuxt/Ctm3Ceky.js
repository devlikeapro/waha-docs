import{u as qe,_ as ns}from"./DM9m2AlX.js";import G from"./DhrnU1B5.js";import Ns from"./BWYYUu-J.js";import{u as J,a as Bs,s as ke,C as we,W as Ps,l as ve}from"./BbfX-E6k.js";import{O as H,S as Xe,P as Y,N as o,t as c,v as h,x as s,y as d,Q as N,z as n,X as We,_ as ge,U as z,Y as Te,V as S,L as R,A as m,r as b,o as He,c as M,Z as ls,B,$ as le,M as os,H as ie,a0 as qs,a1 as is,a2 as Z,R as Ie,a3 as Ws,a4 as De,i as Le,a5 as Hs,d as Fe,C as Fs,D as zs,a6 as Ks,W as Gs,T as Ve}from"./B84ENFC1.js";import Qs from"./B_jdsd0A.js";import ce from"./C3nzapsZ.js";import Xs from"./CyN2XbeM.js";import as from"./H_OBNKGj.js";import ze from"./BHdWHbi2.js";import rs from"./mcoUVg1Q.js";import cs from"./Cg5ARNsk.js";import us from"./D6e6e_oy.js";import Js from"./D6ZIrVv1.js";import{u as xe,_ as ds}from"./BdFRGBcx.js";import Ae from"./CHYdEvw_.js";import{_ as Ys,a as Zs,b as ps}from"./xvW2Am9_.js";import Je from"./BLblQQDB.js";import eo from"./DSBS0f4i.js";import Ke from"./DdWfxtrF.js";import{_ as so}from"./CbneMcP1.js";import oo from"./PH8a54_o.js";import to from"./DNc9gdq2.js";import no from"./DK_yGO8e.js";import Ce from"./CIDoNYpX.js";import ms from"./DaYGdBv2.js";import vs from"./B-1MOlqF.js";import fs from"./s_GMIVdC.js";import _s from"./p0Fo0qlp.js";import Ye from"./8xGVye2A.js";import Ze from"./BVLMXDlY.js";import hs from"./BLi4u1bb.js";import bs from"./CSR597rY.js";import lo from"./C8whVdvW.js";import io from"./BLiRrLBz.js";function gs(l="app"){const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let a=0;a<8;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return`${l}_${e}`}function ao(l){return l?Object.keys(l).map(i=>({key:i,value:l[i]})):[]}function ro(l){return l.reduce((i,e)=>(i[e.key]=e.value,i),{})}const co={key:0},uo={key:1,class:"ml-auto flex align-items-center gap-2 mr-2"},po={for:"show-duplicates"},mo={class:"pi pi-info-circle"},vo={__name:"HideDuplicates",setup(l){const{t:i}=H(),e=J(),{hideDuplicatedSessions:a,servers:t}=Xe(e);return e.$subscribe((p,v)=>{Bs(v.hideDuplicatedSessions)}),(p,v)=>{const r=Ns,f=Y("tooltip");return o(t)&&o(t).length<2?(c(),h("div",co)):(c(),h("div",uo,[s("label",po,d(o(i)("sessions.hideDuplicates")),1),N(s("i",mo,null,512),[[f,o(i)("sessions.hideDuplicatesTooltip")]]),n(r,{id:"show-duplicates",modelValue:o(a),"onUpdate:modelValue":v[0]||(v[0]=u=>We(a)?a.value=u:null)},null,8,["modelValue"])]))}}},fo={class:"metadata"},_o={__name:"Metadata",props:["metadata"],setup(l){return(i,e)=>(c(),h("div",fo,[(c(!0),h(z,null,Te(l.metadata,(a,t)=>(c(),h("pre",{key:t},d(t)+"="+d(a),1))),128))]))}},ho=ge(_o,[["__scopeId","data-v-cb7cbf08"]]),bo={key:0,class:"text-center p-1"},go={class:"text-center"},yo=s("i",{class:"mr-3 pi pi-user",style:{color:"#34d399"}},null,-1),Pe={__name:"ContactChip",props:{id:String,name:String,image:String},setup(l){return(i,e)=>{const a=rs;return c(),h("div",null,[l.name?(c(),h("div",bo,[s("b",go,d(l.name),1)])):S("",!0),l.id?(c(),R(a,{key:1,label:l.id,image:l.image,icon:"pi pi-user"},{icon:m(()=>[yo]),_:1},8,["label","image"])):S("",!0)])}}},es={__name:"SessionChip",props:{session:Object},setup(l){const i=l,e=J(),a=b(null);return He(()=>{var t,p,v;(p=(t=i.session)==null?void 0:t.me)!=null&&p.id&&((v=i.session)==null?void 0:v.status)==="WORKING"&&e.getProfilePicture(i.session.server.id,i.session.name,i.session.me.id).then(r=>{a.value=r.profilePictureURL})}),(t,p)=>{var v,r,f,u;return c(),R(Pe,{id:(r=(v=i.session)==null?void 0:v.me)==null?void 0:r.id,name:(u=(f=i.session)==null?void 0:f.me)==null?void 0:u.pushName,image:o(a)},null,8,["id","name","image"])}}},Re={__name:"RefreshButton",props:["refreshing"],setup(l){const i=l,e=M(()=>i.refreshing?"pi pi-refresh pi-spin":"pi pi-refresh");return(a,t)=>{const p=G;return c(),R(p,{icon:o(e),rounded:"",text:"",disabled:l.refreshing},null,8,["icon","disabled"])}}},$o=["src"],ys={__name:"Base64Img",props:{data:String,mimetype:String},setup(l){const i=l,e=M(()=>`data:${i.mimetype};base64, ${i.data}`);return(a,t)=>(c(),h("img",{src:e.value,style:{"max-width":"100%"}},null,8,$o))}},wo={key:2,style:{"background-color":"#f8f9fa",padding:"1rem",color:"red","white-space":"pre-wrap"}},$s={__name:"SessionScreenshot",props:{session:Object},setup(l,{expose:i}){const e=J(),a=l,{data:t,pending:p,error:v,refresh:r}=qe(`session-screenshot-${a.session.server.id}-${a.session.name}`,async()=>(await ke(1e3),await e.getScreenshot(a.session.server.id,a.session.name)));return i({refresh:r}),(f,u)=>{const g=cs,y=us,k=ys;return c(),h(z,null,[o(p)?(c(),h(z,{key:0},[n(g,{mode:"indeterminate",style:{height:"3px"}}),!o(t)&&!o(v)?(c(),R(y,{key:0,width:"100%",height:"20rem"})):S("",!0)],64)):S("",!0),o(t)?(c(),R(k,{key:1,data:o(t).data,mimetype:o(t).mimetype},null,8,["data","mimetype"])):S("",!0),o(v)?(c(),h("pre",wo,""+d(o(v).cause.response.data.message||o(v).cause.response.data||o(v))+`
  `,1)):S("",!0)],64)}}},ko={class:"",style:{"min-width":"20rem"}},xo={class:"flex justify-content-center align-items-center"},Co={class:"m-0"},So={class:"m-auto w-full"},Vo={__name:"ScreenshotButton",props:["session"],setup(l){const{t:i}=H(),e=l,a=b(null),t=b(null),p=f=>{a.value.toggle(f)},v=()=>{t.value.refresh()},r=M(()=>e.session.status==="STOPPED");return(f,u)=>{const g=G,y=Re,k=$s,I=Js,$=Y("tooltip");return c(),h(z,null,[N(n(g,{disabled:o(r),type:"button",icon:"pi pi-camera",onClick:p,rounded:"",outlined:"",severity:"help"},null,8,["disabled"]),[[$,o(i)("screenshot.screenshotQR"),void 0,{top:!0}]]),n(I,{ref_key:"op",ref:a,appendTo:"body",showCloseIcon:!0},{default:m(()=>[s("div",ko,[s("div",xo,[s("h5",Co,d(o(i)("screenshot.screenshot")),1),n(y,{onClick:v})]),s("div",So,[n(k,{ref_key:"screenshot",ref:t,session:l.session},null,8,["session"])])])]),_:1},512)],64)}}},To={class:"flex flex-row gap-2 justify-content-end"},ws={__name:"SessionActionButtons",props:["name","isStarting","isRestarting","isStopping","isLoggingOut","isRemoving","allDisabled","hideActions","skipConfirmation","group"],emits:["view","start","restart","stop","logout","delete","apps"],setup(l,{emit:i}){const{t:e}=H(),a=ls(),t=l,p=i;function v($){return t.skipConfirmation?!t.skipConfirmation.includes($):!0}async function r(){if(!v("start")){p("start");return}a.require({group:t.group,target:event.target,message:e("sessions.startConfirm",{name:t.name}),icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-success p-button-sm",rejectLabel:e("sessions.no"),acceptLabel:e("sessions.yesStart"),accept:()=>{p("start")},reject:()=>{}})}const f=M(()=>t.hideActions?!t.hideActions.includes("view"):!0),u=M(()=>t.hideActions?!t.hideActions.includes("apps"):!0);function g($){a.require({group:t.group,target:$.target,message:e("sessions.restartConfirm",{name:t.name}),icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-info p-button-sm",rejectLabel:e("sessions.no"),acceptLabel:e("sessions.yesRestart"),accept:()=>{p("restart")},reject:()=>{}})}function y($){a.require({group:t.group,target:$.target,message:e("sessions.stopConfirm",{name:t.name}),icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-warning p-button-sm",rejectLabel:e("sessions.no"),acceptLabel:e("sessions.yesStop"),accept:async()=>{p("stop")},reject:()=>{}})}function k($){a.require({group:t.group,target:$.target,message:e("sessions.logoutConfirm",{name:t.name}),icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-warning p-button-sm",rejectLabel:e("sessions.no"),acceptLabel:e("sessions.yesLogout"),accept:async()=>{p("logout")},reject:()=>{}})}function I($){a.require({group:t.group,target:$.target,message:e("sessions.deleteConfirm",{name:t.name}),icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:e("sessions.no"),acceptLabel:e("sessions.yesDelete"),accept:async()=>{p("delete")},reject:()=>{}})}return($,w)=>{const U=G,L=Je,_=eo,A=Y("tooltip");return c(),h(z,null,[s("div",To,[o(f)?N((c(),R(U,{key:0,icon:"pi pi-cog",severity:"help",rounded:"",outlined:"",onClick:w[0]||(w[0]=D=>$.$emit("view")),disabled:l.allDisabled},null,8,["disabled"])),[[A,o(e)("sessions.configuration"),void 0,{top:!0}]]):S("",!0),o(u)?N((c(),R(U,{key:1,icon:"pi pi-th-large",severity:"info",rounded:"",outlined:"",onClick:w[1]||(w[1]=D=>$.$emit("apps")),disabled:l.allDisabled},null,8,["disabled"])),[[A,o(e)("sessions.apps"),void 0,{top:!0}]]):S("",!0),N(n(U,{icon:"pi pi-play",severity:"success",rounded:"",outlined:"",onClick:r,loading:l.isStarting,disabled:l.allDisabled},null,8,["loading","disabled"]),[[A,o(e)("sessions.start"),void 0,{top:!0}]]),N(n(U,{icon:"pi pi-replay",severity:"info",rounded:"",outlined:"",onClick:w[2]||(w[2]=D=>g(D)),loading:l.isRestarting,disabled:l.allDisabled},null,8,["loading","disabled"]),[[A,o(e)("sessions.restart"),void 0,{top:!0}]]),N(n(U,{icon:"pi pi-stop",severity:"secondary",rounded:"",outlined:"",onClick:w[3]||(w[3]=D=>y(D)),loading:l.isStopping,disabled:l.allDisabled},null,8,["loading","disabled"]),[[A,o(e)("sessions.stop"),void 0,{top:!0}]]),N(n(U,{icon:"pi pi-sign-out",severity:"warning",rounded:"",outlined:"",onClick:w[4]||(w[4]=D=>k(D)),loading:l.isLoggingOut,disabled:l.allDisabled},null,8,["loading","disabled"]),[[A,o(e)("sessions.logout"),void 0,{top:!0}]]),N(n(U,{icon:"pi pi-trash",severity:"danger",rounded:"",outlined:"",onClick:w[5]||(w[5]=D=>I(D)),loading:l.isRemoving,disabled:l.allDisabled},null,8,["loading","disabled"]),[[A,o(e)("sessions.delete"),void 0,{top:!0}]])]),l.group==="popup"?(c(),R(L,{key:0,group:"popup"})):S("",!0),l.group==="dialog"?(c(),R(_,{key:1,group:"dialog"})):S("",!0)],64)}}},Io={class:"flex flex-row gap-2 justify-content-end"},Do={__name:"SessionActions",props:["session","disabled"],emits:["view","apps"],setup(l,{expose:i,emit:e}){const{t:a}=H(),t=l,p=J(),v=xe(),r=b(!1),f=b(!1),u=b(!1),g=b(!1),y=b(!1),k=M(()=>t.disabled||r.value||f.value||u.value||g.value||y.value);async function I(){const _=t.session;g.value=!0,await v(p.startSession(_.server.id,_.name),a("sessions.started"),a("sessions.failedToStartSession"),_.name,_.name).finally(()=>g.value=!1)}async function $(){const _=t.session;y.value=!0,await v(p.restartSession(_.server.id,_.name),a("sessions.restarted"),a("sessions.failedToRestartSession"),_.name,_.name).finally(()=>y.value=!1)}async function w(){const _=t.session;r.value=!0,await v(p.stopSession(_.server.id,_.name),a("sessions.stopped"),a("sessions.failedToStopSession"),_.name,_.name).finally(()=>r.value=!1)}async function U(){const _=t.session;f.value=!0,await v(p.logoutSession(_.server.id,_.name),a("sessions.loggedOut"),a("sessions.failedToLogoutSession"),_.name,_.name).finally(()=>f.value=!1)}async function L(){const _=t.session;u.value=!0,await v(p.deleteSession(_.server.id,_.name),a("sessions.deleted"),a("sessions.failedToDeleteSession"),_.name,_.name).finally(()=>u.value=!1)}return i({startSession:I,restartSession:$,stopSession:w,logoutSession:U,deleteSession:L}),(_,A)=>{const D=ws;return c(),h("div",Io,[n(D,{group:"popup",name:`'${l.session.name}' ${o(a)("sessions.session")}`,onView:A[0]||(A[0]=C=>_.$emit("view",l.session)),onApps:A[1]||(A[1]=C=>_.$emit("apps",l.session)),onStart:I,onRestart:$,onStop:w,onLogout:U,onDelete:L,"is-starting":o(g),"is-restarting":o(y),"is-stopping":o(r),"is-logging-out":o(f),"is-removing":o(u),"all-disabled":o(k),"hide-actions":[],"skip-confirmation":["start"]},null,8,["name","is-starting","is-restarting","is-stopping","is-logging-out","is-removing","all-disabled"])])}}},Lo={class:"p-dialog-title flex gap-2 align-items-center"},Ao=s("i",{class:"pi pi-whatsapp"},null,-1),Ro=s("span",null,"(",-1),Uo={class:"ml-1"},Eo=s("span",null,")",-1),Oo=["disabled"],jo=s("i",{class:"pi pi-refresh"},null,-1),Mo=[jo],Ue={__name:"SessionHeader",props:{session:Object,refresh:Boolean},setup(l){const{t:i}=H(),e=l,a=J(),{refreshing:t}=Xe(a),p=M(()=>e.session.server.id?e.session.server:a.getServer(e.session.server));async function v(){await a.refresh()}async function r(f){var u;await navigator.clipboard.writeText(((u=e.session)==null?void 0:u.name)||""),f&&f.preventDefault&&f.preventDefault()}return(f,u)=>{var w;const g=G,y=ds,k=so,I=ns,$=Y("tooltip");return c(),h("div",Lo,[Ao,s("span",null,d((w=l.session)==null?void 0:w.name),1),N(n(g,{text:"",tabindex:0,icon:"pi pi-copy",severity:"secondary",onClick:u[0]||(u[0]=U=>r(U))},null,512),[[$,{value:o(i)("sessions.copiedToClipboard")},void 0,{focus:!0,bottom:!0}]]),n(y,{status:l.session.status},null,8,["status"]),s("div",null,[Ro,n(k,{connected:p.value.connected},null,8,["connected"]),s("span",Uo,d(p.value.name),1),Eo]),l.refresh?N((c(),h("button",{key:0,onClick:u[1]||(u[1]=U=>v()),class:"p-link layout-topbar-button",disabled:o(t)},Mo,8,Oo)),[[$,o(i)("sessions.refresh"),void 0,{top:!0}]]):S("",!0),n(I,{refreshing:o(t)},null,8,["refreshing"])])}}},No=s("br",null,null,-1),Bo={href:"https://waha.devlike.pro/",target:"_blank"},Po=s("br",null,null,-1),qo={href:"https://waha.devlike.pro/docs/how-to/chats/",target:"_blank"},Wo={href:"https://waha.devlike.pro/docs/how-to/send-messages/",target:"_blank"},Ho={href:"https://waha.devlike.pro/docs/how-to/webhooks/#messageack",target:"_blank"},Fo={href:"https://waha.devlike.pro/docs/how-to/webhooks/#websockets",target:"_blank"},zo={href:"https://github.com/devlikeapro/waha-hub/tree/main/ui/components/chat",target:"_blank"},Ko={href:"https://waha.devlike.pro/pricing/#tier-pro",target:"_blank"},Go={__name:"ChatPromo",emits:["close"],setup(l,{emit:i}){const e=i;return(a,t)=>{const p=oo;return c(),R(p,{onClose:t[0]||(t[0]=v=>e("close"))},{default:m(()=>[B(d(a.$t("chat.promo.exampleChatsUI")),1),No,B(" "+d(a.$t("chat.promo.implementFeatures"))+" ",1),s("a",Bo,[s("b",null,d(a.$t("chat.promo.wahaAPI")),1)]),B(" :"),Po,s("ul",null,[s("li",null,[s("a",qo,[s("b",null,d(a.$t("chat.promo.chatsAPI")),1)]),B(" "+d(a.$t("chat.promo.getChatsOverview")),1)]),s("li",null,[s("a",Wo,[s("b",null,d(a.$t("chat.promo.sendAPI")),1)]),B(" "+d(a.$t("chat.promo.sendMessages")),1)]),s("li",null,[s("a",Ho,[s("b",null,d(a.$t("chat.promo.messageACK")),1)]),B(" "+d(a.$t("chat.promo.getMessageStatus")),1)]),s("li",null,[s("a",Fo,[s("b",null,d(a.$t("chat.promo.websockets")),1)]),B(" "+d(a.$t("chat.promo.getRealTimeMessages")),1)])]),B(" 👉 "),s("a",zo,[s("b",null,d(a.$t("chat.promo.sourceCodeOnGithub")),1)]),B(" "+d(a.$t("chat.promo.availableFor"))+" ",1),s("a",Ko,d(a.$t("chat.promo.wahaPro")),1),B(" "+d(a.$t("chat.promo.supporters")),1)]),_:1})}}},Qo={class:"flex"},ks={__name:"MessageAck",props:{ack:Number},setup(l){const i=l,e={ERROR:-1,PENDING:0,SERVER:1,DEVICE:2,READ:3,PLAYED:4},a=M(()=>{switch(i.ack){case e.ERROR:return"pi-exclamation-circle";case e.PENDING:return"pi-clock";case e.SERVER:return"pi-check";case e.DEVICE:return"pi-check";case e.READ:return"pi-check";case e.PLAYED:return"pi-microphone"}}),t=M(()=>{switch(i.ack){case e.ERROR:return"color: red";case e.PENDING:return"color: blue";case e.SERVER:return"";case e.DEVICE:return"";case e.READ:return"color: blue";case e.PLAYED:return"color: blue"}});return(p,v)=>(c(),h("div",Qo,[s("i",{class:le(["pi",o(a)]),style:os(o(t))},null,6),l.ack===e.READ||l.ack===e.DEVICE?(c(),h("i",{key:0,class:le(["pi",o(a)]),style:os([o(t),{"margin-left":"-0.7rem"}])},null,6)):S("",!0)]))}},Xo={class:"p-2"},Jo=["innerHTML"],Yo={class:"flex flex-column justify-content-end",style:{height:"100%"}},Zo={__name:"ChatMessage",props:{message:Object},setup(l){return(i,e)=>{const a=rs;return c(),R(a,null,{default:m(()=>[s("div",Xo,[s("p",{innerHTML:l.message.body.replace(/\n/g,"<br>")},null,8,Jo)]),s("div",Yo,[n(ks,{ack:l.message.ack,class:"pb-2"},null,8,["ack"])])]),_:1})}}},et={class:"flex flex-column gap-2"},st={__name:"ChatMessages",props:{messages:Array},setup(l){const i=l,e=b(null);async function a(){await ke(10),e.value&&(e.value.scrollTop=e.value.scrollHeight)}return ie(()=>i.messages,a),(t,p)=>{const v=Zo;return c(),h("div",{class:"my-2 pb-3",style:{width:"100%",height:"100%",overflow:"auto"},ref_key:"scroll",ref:e},[s("div",et,[(c(!0),h(z,null,Te(l.messages,r=>(c(),h(z,null,[r.body?(c(),h("div",{key:0,class:le({"flex justify-content-end":r.fromMe})},[(c(),R(v,{key:r.key,message:r},null,8,["message"]))],2)):S("",!0)],64))),256))])],512)}}},ot={class:"flex justify-content-between gap-2 my-2"},tt={class:"flex gap-2 align-items-center"},nt={__name:"ChatHeader",props:{chat:Object,me:Object,mePicture:Object,fetching:Boolean,fetch:Function},setup(l){return(i,e)=>{var t;const a=Re;return c(),h("div",ot,[s("div",tt,[n(Pe,{id:l.chat.name||l.chat.id,image:l.chat.picture},null,8,["id","image"])]),n(a,{onClick:l.fetch,refreshing:l.fetching},null,8,["onClick","refreshing"]),n(Pe,{id:(t=l.me)==null?void 0:t.pushName,image:l.mePicture},null,8,["id","image"])])}}},lt={class:"flex gap-1 mt-1"},ts=60,it={__name:"ChatPreview",props:{id:String,name:String,picture:String,message:Object},setup(l){const i=l,e=M(()=>{var t,p,v;return((t=i.message)==null?void 0:t.body)?((v=(p=i.message)==null?void 0:p.body)==null?void 0:v.length)>ts?i.message.body.slice(0,ts)+"...":i.message.body:""});return(a,t)=>(c(),h(z,null,[n(Pe,{id:i.name||i.id,image:i.picture},null,8,["id","image"]),s("div",lt,[o(e)?(c(),R(ks,{key:0,ack:l.message.ack,class:"pb-2"},null,8,["ack"])):S("",!0),B(" "+d(o(e)),1)])],64))}},at={class:"flex justify-content-center align-items-center gap-1"},rt={__name:"ChatList",props:{chats:Array,pending:Boolean},emits:["clickOnChat","refreshChats"],setup(l,{emit:i}){const e=i;return(a,t)=>{const p=Re,v=it,r=ze,f=Ke;return c(),R(f,{value:l.chats,loading:l.pending,class:"p-datatable--clickable",onRowClick:t[1]||(t[1]=u=>e("clickOnChat",u.data)),scrollable:"",scrollHeight:"100%",rowHover:!0},{default:m(()=>[n(r,null,{header:m(()=>[s("div",at,[s("div",null,d(a.$t("chat.last20Chats")),1),n(p,{onClick:t[0]||(t[0]=u=>e("refreshChats")),refreshing:l.pending},null,8,["refreshing"])])]),body:m(({data:u})=>[n(v,{id:u.id,name:u.name,picture:u.picture,message:u.lastMessage},null,8,["id","name","picture","message"])]),_:1})]),_:1},8,["value","loading"])}}},ct={class:"flex justify-content-end",style:{width:"100%"}},ut={style:{width:"100%"}},dt={class:"my-auto pl-2"},pt={__name:"ChatInputFooter",props:{disabled:Boolean,sendText:Function},setup(l){const i=l,e=b(!1),a=b("");function t(){e.value=!0,i.sendText(a.value).then(()=>{a.value=""}).finally(()=>{e.value=!1})}return(p,v)=>{const r=ms,f=G;return c(),h("div",ct,[s("div",ut,[n(r,{modelValue:o(a),"onUpdate:modelValue":v[0]||(v[0]=u=>We(a)?a.value=u:null),rows:"2",cols:"50",onKeydown:qs(is(t,["ctrl"]),["enter"]),style:{width:"100%"}},null,8,["modelValue","onKeydown"])]),s("div",dt,[n(f,{onClick:t,disabled:l.disabled||!o(a),loading:o(e),label:"",icon:"pi pi-send",class:"p-button-success"},null,8,["disabled","loading"])])])}}},mt={class:"pb-3 flex"},vt={class:"flex align-items-center gap-1"},ft={class:"m-auto pb-2"},_t={class:"text-center"},ht={class:"flex flex-column justify-content-between",style:{height:"100%"}},bt=s("hr",null,null,-1),gt={__name:"SessionChatDialog",props:{visible:{},visibleModifiers:{},session:{},sessionModifiers:{}},emits:["update:visible","update:session"],setup(l){const i=Z(l,"visible"),e=Z(l,"session");ie(i,()=>{i.value||(f.value=null,u.value=[],_())}),Ie();const a=J(),{data:t,pending:p,error:v,refresh:r}=qe(`session-${e.value.name}-chats`,async()=>await a.getChatsOverview(e.value.server.id,e.value.name,20)),f=b(null),u=b([]),g=b(null);ie(f,()=>{f.value&&A()});const y=b(!1),k=b(20),I=b(0);let $=null;const w=b(we.DISCONNECTED);function U(){const P=a.getServer(e.value.server.id),q=["message.any"];$=new Ps(P,q,e.value.name),$.connect(),w.value=we.CONNECTING,$.on("open",()=>{w.value=we.CONNECTED}),$.on("close",()=>{w.value=we.DISCONNECTED}),$.on("error",()=>{w.value=we.ERROR}),$.on("event",L)}async function L(P){var K;await ke(100);const q=(K=f.value)==null?void 0:K.id;q&&((P.payload.from===q||P.payload.to===q)&&A(),r())}function _(){$==null||$.stop(),$=null,w.value=we.DISCONNECTED}function A(){y.value=!0,a.getChatsMessages(e.value.server.id,e.value.name,f.value.id,k.value,I.value,!1).then(P=>{u.value=P.reverse()}).finally(()=>{y.value=!1})}ie(e,()=>{var P,q;(q=(P=e.value)==null?void 0:P.me)!=null&&q.id&&(_(),U(),r(),a.getProfilePicture(e.value.server.id,e.value.name,e.value.me.id).then(K=>{g.value=K.profilePictureURL}))});function D(P){f.value=P}function C(P){return a.sendText(e.value.server.id,e.value.name,f.value.id,P).then(()=>{ke(100)})}const Q=b(!1);return(P,q)=>{const K=Ue,W=es,F=Go,ae=to,ye=no,oe=Ce;return c(),R(oe,{visible:i.value,"onUpdate:visible":q[2]||(q[2]=ue=>i.value=ue),modal:!0,maximizable:"",style:{width:"90%",height:"90%"}},{header:m(()=>[s("div",null,[n(K,{session:e.value},null,8,["session"])])]),default:m(()=>[s("div",mt,[s("div",vt,[e.value.me?(c(),R(W,{key:0,session:e.value,image:g.value},null,8,["session","image"])):S("",!0),n(Ys,{status:w.value},null,8,["status"])]),s("div",ft,[s("div",_t,[s("a",{href:"#",onClick:q[0]||(q[0]=ue=>Q.value=!0)},[s("b",null,d(P.$t("chat.aboutChatUI")),1)])]),Q.value?(c(),R(F,{key:0,style:{"max-width":"50em"},onClose:q[1]||(q[1]=ue=>Q.value=!1)})):S("",!0)])]),n(ye,{style:{"max-height":"90%"}},{default:m(()=>[n(ae,{size:30,class:"flex items-center justify-center"},{default:m(()=>[n(rt,{chats:o(t),loading:o(p),onClickOnChat:D,onRefreshChats:o(r)},null,8,["chats","loading","onRefreshChats"])]),_:1}),n(ae,{size:70,class:"flex flex-column gap-2 justify-content-between p-2"},{default:m(()=>[s("div",ht,[f.value?(c(),h(z,{key:0},[n(nt,{chat:f.value,me:e.value.me,mePicture:g.value,fetch:A,fetching:y.value},null,8,["chat","me","mePicture","fetching"]),bt,n(st,{messages:u.value},null,8,["messages"]),n(pt,{disabled:!f.value||y.value,sendText:C},null,8,["disabled"])],64)):S("",!0)])]),_:1})]),_:1})]),_:1},8,["visible"])}}},yt={class:"-mt-4 p-0 line-height-3 block",style:{"font-family":"monaco, Consolas, 'Lucida Console', monospace"}},$t={__name:"CodeHighlight",props:["invalid"],setup(l){const i=l,e=M(()=>i.invalid?"p-invalid p-component p-inputtext":"");return(a,t)=>(c(),h("pre",{class:le(["border-round surface-ground text-900 p-5 overflow-auto",e.value])},[B("        "),s("code",yt,[Ws(a.$slots,"default")])],2))}},wt={class:"h-full flex flex-column"},kt={class:"flex justify-content-center align-items-center"},xt={class:"m-0"},Ct={class:"flex flex-column justify-content-between h-full"},St={class:"flex flex-column gap-2"},Vt={class:"flex gap-2"},Tt={class:"text-center"},It={class:"mb-2"},Dt={class:"text-center mt-2"},Lt={class:"flex flex-column h-full"},At={class:"flex justify-content-center align-items-center"},Rt={class:"m-0"},Ut={__name:"SessionRequestResponse",props:["session"],setup(l){const{t:i}=H(),e=J(),a=l,t=b(null),p=b("POST"),v=b("/api/sendText"),r=b(""),f=b(!1),u=b(!1);function g(L){return JSON.stringify(L,null,2)}function y(L){try{return JSON.parse(L)}catch{return L}}const k=M(()=>({method:p.value,uri:v.value,params:void 0,body:y(r.value)})),I=["GET","POST","PUT","DELETE","PATCH"];async function $(L){await navigator.clipboard.writeText(t.value),L.preventDefault()}async function w(L){await navigator.clipboard.writeText(g(k.value)),L.preventDefault()}async function U(){try{u.value=!1,f.value=!0;const L=await e.callServerAPI(a.session.server.id,k.value);t.value=g(L)}catch(L){u.value=!0,L.response?t.value=g(L.response.data):t.value=g(L)}finally{f.value=!1}}return He(()=>{const L={chatId:"11111111111@c.us",text:"Hi there!",session:a.session.name};r.value=g(L),t.value="..."}),(L,_)=>{const A=G,D=Ae,C=ce,Q=ms,P=vs,q=$t,K=Y("tooltip");return c(),h(z,null,[s("div",null,[s("div",wt,[s("div",kt,[s("h5",xt,d(o(i)("sessions.request")),1),N(n(A,{rounded:"",text:"",tabindex:0,icon:"pi pi-copy",onClick:_[0]||(_[0]=W=>w(W))},null,512),[[K,{value:o(i)("sessions.copiedToClipboard")},void 0,{focus:!0,bottom:!0}]])]),s("div",Ct,[s("div",St,[s("div",Vt,[n(D,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=W=>p.value=W),options:I},null,8,["modelValue"]),n(C,{type:"text",class:"w-full",modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=W=>v.value=W),placeholder:o(i)("sessions.apiEndpoint")},null,8,["modelValue","placeholder"])]),s("div",Tt,[s("div",It,d(o(i)("sessions.body")),1),n(Q,{modelValue:r.value,"onUpdate:modelValue":_[3]||(_[3]=W=>r.value=W),rows:"8",class:"w-full",placeholder:o(i)("sessions.request")},null,8,["modelValue","placeholder"])])]),s("div",Dt,[n(A,{onClick:U,loading:f.value,label:o(i)("sessions.send"),icon:"pi pi-send","icon-pos":"right"},null,8,["loading","label"])])])])]),n(P),s("div",null,[s("div",Lt,[s("div",At,[s("h5",Rt,d(o(i)("sessions.response")),1),N(n(A,{rounded:"",text:"",tabindex:0,icon:"pi pi-copy",onClick:_[4]||(_[4]=W=>$(W))},null,512),[[K,{value:o(i)("sessions.copiedToClipboard")},void 0,{focus:!0,bottom:!0}]])]),n(q,{class:"m-0 p-4 pretty",invalid:u.value},{default:m(()=>[B(d(t.value),1)]),_:1},8,["invalid"])])])],64)}}},Et=ge(Ut,[["__scopeId","data-v-1e461245"]]),Ot={class:"grid pt-4"},jt={class:"col-12 sm:col-6 h-full"},Mt={class:"grid"},Nt={class:"col-12"},Bt={class:""},Pt={class:"flex justify-content-center align-items-center"},qt={class:"col-12"},Wt={class:""},Ht={class:"flex justify-content-center align-items-center"},Ft=s("h5",{class:"m-0"},"Screenshot",-1),zt={class:"m-auto w-full"},Kt={class:"col-12 sm:col-6 h-full card"},Gt={__name:"SessionControl",props:["session"],setup(l){const i=b(null),e=()=>{i.value.refresh()};return(a,t)=>{const p=es,v=Re,r=$s,f=Et;return c(),h("div",Ot,[s("div",jt,[s("div",Mt,[s("div",Nt,[s("div",Bt,[s("div",Pt,[l.session.me?(c(),R(p,{key:0,session:l.session},null,8,["session"])):S("",!0)])])]),s("div",qt,[s("div",Wt,[s("div",Ht,[Ft,n(v,{onClick:e})]),s("div",zt,[n(r,{ref_key:"screenshot",ref:i,session:l.session},null,8,["session"])])])])])]),s("div",Kt,[n(f,{session:l.session},null,8,["session"])])])}}},Qt={__name:"SessionControlDialog",props:{visible:{},visibleModifiers:{},session:{},sessionModifiers:{}},emits:["update:visible","update:session"],setup(l){const i=Z(l,"visible"),e=Z(l,"session");return Ie(),(a,t)=>{const p=Ue,v=Gt,r=Ce;return c(),R(r,{visible:i.value,"onUpdate:visible":t[0]||(t[0]=f=>i.value=f),modal:!0,maximizable:"",style:{"max-width":"100%"}},{header:m(()=>[n(p,{session:e.value},null,8,["session"])]),default:m(()=>[n(v,{session:e.value},null,8,["session"])]),_:1},8,["visible"])}}},Xt={class:"card p-fluid"},Jt={class:"flex flex-grow-1 justify-content-center"},Yt={class:"flex flex-grow-1 justify-content-center"},xs={__name:"KeyValueTable",props:De(["keyColumn","keyColumnName","prefix","entityName"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const{t:i}=H(),e=Z(l,"modelValue"),a=l,t=b([]),p=u=>{let{newData:g,index:y}=u;e.value[y]=g},v=u=>{let{data:g,newValue:y,field:k}=u;g[k]=y};function r(){const u=e.value.length+1,g=`${a.prefix}${u}`;e.value.unshift({[a.keyColumn]:g,value:"123"})}function f(u){e.value.splice(u,1)}return(u,g)=>{const y=ce,k=ze,I=G,$=Ke,w=Y("tooltip");return c(),h("div",Xt,[n($,{editingRows:t.value,"onUpdate:editingRows":g[0]||(g[0]=U=>t.value=U),value:e.value,editMode:"cell",dataKey:a.keyColumn,onRowEditSave:p,onCellEditComplete:v,pt:{table:{style:"min-width: 50rem"},column:{bodycell:({state:U})=>({style:U.d_editing&&"padding-top: 0.6rem; padding-bottom: 0.6rem"})}},resizableColumns:""},{default:m(()=>[n(k,{field:a.keyColumn,header:a.keyColumnName,style:{width:"40%"}},{editor:m(({data:U,field:L})=>[n(y,{modelValue:U[L],"onUpdate:modelValue":_=>U[L]=_},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["field","header"]),n(k,{style:{width:"40%"},field:"value",header:o(i)("common.value")},{editor:m(({data:U,field:L})=>[n(y,{modelValue:U[L],"onUpdate:modelValue":_=>U[L]=_},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),n(k,{style:{"min-width":"1rem"}},{header:m(()=>[s("div",Jt,[N(n(I,{label:l.entityName,text:"",icon:"pi pi-plus",severity:"success",onClick:r},null,8,["label"]),[[w,`${o(i)("common.add")} ${l.entityName}`,void 0,{top:!0}]])])]),body:m(({index:U})=>[s("div",Yt,[N(n(I,{label:"",rounded:"",text:"",style:{height:"2rem",width:"2rem"},icon:"pi pi-trash",severity:"warning",onClick:L=>f(U)},null,8,["onClick"]),[[w,o(i)("common.delete"),void 0,{top:!0}]])])]),_:1})]),_:1},8,["editingRows","value","dataKey","pt"])])}}},Zt={class:"flex justify-content-between align-items-center w-full"},en={class:"field"},sn={for:"url"},on={class:"field mb-4"},tn={for:"events"},nn={class:"font-bold mb-2"},ln={class:"flex gap-3"},an={class:"field",style:{width:"10em"}},rn={for:"retries-attempts"},cn=s("span",{class:"pi pi-plus"},null,-1),un=s("span",{class:"pi pi-minus"},null,-1),dn={class:"field",style:{width:"10em"}},pn={for:"retries-delay-seconds"},mn=s("span",{class:"pi pi-plus"},null,-1),vn=s("span",{class:"pi pi-minus"},null,-1),fn={class:"field"},_n={for:"retries-delay-policy"},hn={class:"pi pi-info-circle"},bn={style:{"text-transform":"capitalize"}},gn={style:{"text-transform":"capitalize"}},yn={class:"field"},$n={for:"hmac"},wn={class:"field"},kn={class:"field flex justify-content-between align-items-center"},xn={for:"hmac"},Cn={__name:"SessionWebhook",props:De({disabled:Boolean,index:Number},{webhook:{},webhookModifiers:{}}),emits:["update:webhook"],setup(l){const{t:i}=H(),e=Z(l,"webhook"),a=l,t=["constant","linear","exponential"],p=M(()=>{var I;const f=((I=e.value.retries)==null?void 0:I.delaySeconds)??2,u=4,g=Array.from({length:u},($,w)=>f),y=Array.from({length:u},($,w)=>f*(w+1)),k=Array.from({length:u},($,w)=>f*2**w);return[i("sessions.webhooks.constant",{values:g.join(", ")}),i("sessions.webhooks.linear",{values:y.join(", ")}),i("sessions.webhooks.exponential",{values:k.join(", ")})].join(`
`)}),v=Zs,r=b(e.value.customHeaders&&e.value.customHeaders.length>0);return ie(r,(f,u)=>{if(u&&!f){e.value.customHeaders=null;return}!u&&f&&(e.value.customHeaders=[{name:"X-Header-1",value:"123"}])}),(f,u)=>{const g=G,y=ce,k=as,I=hs,$=Ae,w=Le("font-awesome-icon"),U=_s,L=xs,_=Ye,A=Ze,D=Y("tooltip");return c(),R(A,{activeIndex:0},{default:m(()=>[n(_,null,{header:m(()=>[s("div",Zt,[s("div",null,d(o(i)("sessions.webhooks.webhookNumber",{number:a.index+1})),1),s("div",null,[N(n(g,{label:"",text:"",rounded:"",style:{height:"2rem",width:"2rem"},icon:"pi pi-trash",severity:"warning",onClick:u[0]||(u[0]=C=>f.$emit("remove"))},null,512),[[D,o(i)("sessions.webhooks.deleteWebhook"),void 0,{top:!0}]])])])]),default:m(()=>[s("div",en,[s("label",sn,d(o(i)("sessions.webhooks.url")),1),n(y,{id:"url",modelValue:e.value.url,"onUpdate:modelValue":u[1]||(u[1]=C=>e.value.url=C),modelModifiers:{trim:!0},required:"true",disabled:l.disabled},null,8,["modelValue","disabled"])]),s("div",on,[s("label",tn,d(o(i)("sessions.webhooks.events")),1),n(k,{id:"events",modelValue:e.value.events,"onUpdate:modelValue":u[2]||(u[2]=C=>e.value.events=C),options:o(v),placeholder:o(i)("sessions.webhooks.selectEvents"),"max-selected-labels":1,selectedItemsLabel:o(i)("sessions.webhooks.eventsSelected"),disabled:l.disabled},null,8,["modelValue","options","placeholder","selectedItemsLabel","disabled"]),s("ul",null,[(c(!0),h(z,null,Te(e.value.events,C=>(c(),h("li",{key:C},d(C),1))),128))])]),s("div",null,[s("div",nn,d(o(i)("sessions.webhooks.retries")),1),s("div",ln,[s("div",an,[s("label",rn,d(o(i)("sessions.webhooks.attempts")),1),n(I,{modelValue:e.value.retries.attempts,"onUpdate:modelValue":u[3]||(u[3]=C=>e.value.retries.attempts=C),inputId:"retries-delay-attempts",showButtons:"",buttonLayout:"horizontal",min:1,step:1,disabled:l.disabled},{incrementbuttonicon:m(()=>[cn]),decrementbuttonicon:m(()=>[un]),_:1},8,["modelValue","disabled"])]),s("div",dn,[s("label",pn,d(o(i)("sessions.webhooks.delaySeconds")),1),n(I,{modelValue:e.value.retries.delaySeconds,"onUpdate:modelValue":u[4]||(u[4]=C=>e.value.retries.delaySeconds=C),inputId:"retries-delay-seconds",showButtons:"",buttonLayout:"horizontal",min:1,step:1,disabled:l.disabled},{incrementbuttonicon:m(()=>[mn]),decrementbuttonicon:m(()=>[vn]),_:1},8,["modelValue","disabled"])]),s("div",fn,[s("label",_n,[B(d(o(i)("sessions.webhooks.retryPolicy"))+"   ",1),N(s("i",hn,null,512),[[D,o(p)]])]),n($,{id:"retries-delay-policy",modelValue:e.value.retries.policy,"onUpdate:modelValue":u[5]||(u[5]=C=>e.value.retries.policy=C),options:t,placeholder:o(i)("sessions.webhooks.selectRetryPolicy"),"max-selected-labels":1,disabled:l.disabled},{option:m(C=>[s("span",bn,d(C.option),1)]),value:m(C=>[s("span",gn,d(C.value),1)]),_:1},8,["modelValue","placeholder","disabled"])])])]),s("div",yn,[s("label",$n,d(o(i)("sessions.webhooks.hmacKey")),1),n(y,{id:"hmac",modelValue:e.value.hmac.key,"onUpdate:modelValue":u[6]||(u[6]=C=>e.value.hmac.key=C),modelModifiers:{trim:!0},disabled:l.disabled},null,8,["modelValue","disabled"])]),s("div",wn,[s("div",kn,[s("div",null,[s("label",xn,d(o(i)("sessions.webhooks.customHeaders")),1)]),n(U,{modelValue:r.value,"onUpdate:modelValue":u[7]||(u[7]=C=>r.value=C),id:"customHeaders",onLabel:o(i)("sessions.webhooks.headersOn"),offLabel:o(i)("sessions.webhooks.headersOff")},{icon:m(()=>[n(w,{icon:"fa-solid fa-fingerprint",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])]),r.value?(c(),R(L,{key:0,modelValue:e.value.customHeaders,"onUpdate:modelValue":u[8]||(u[8]=C=>e.value.customHeaders=C),"entity-name":"Header","key-column":"name","key-column-name":"Header",prefix:"X-Header-"},null,8,["modelValue"])):S("",!0)])]),_:1})]),_:1})}}},Sn={class:"flex flex-column gap-2"},Vn={class:"flex justify-content-between align-items-center w-full"},Tn={class:"pr-2"},In={key:0,class:"text-300 text-center"},Dn={__name:"SessionWebhooksField",props:De({disabled:Boolean},{webhooks:{},webhooksModifiers:{}}),emits:["update:webhooks"],setup(l){const{t:i}=H(),e=Z(l,"webhooks");function a(){const p={url:"https://httpbin.org/post",events:["session.status","message"],hmac:{key:null},retries:{delaySeconds:2,attempts:15,policy:"exponential"},customHeaders:null};e.value.push(p)}function t(p){e.value.splice(p,1)}return(p,v)=>{const r=G,f=Cn,u=Y("tooltip");return c(),h("div",Sn,[s("div",Vn,[s("h5",null,d(o(i)("sessions.webhooks.title")),1),s("div",Tn,[N(n(r,{label:o(i)("sessions.webhooks.webhook"),text:"",icon:"pi pi-plus",severity:"success",onClick:a},null,8,["label"]),[[u,o(i)("sessions.webhooks.addWebhook"),void 0,{top:!0}]])])]),e.value.length===0?(c(),h("div",In,d(o(i)("sessions.webhooks.noWebhooksConfigured")),1)):(c(!0),h(z,{key:1},Te(e.value,(g,y)=>(c(),R(f,{webhook:e.value[y],"onUpdate:webhook":k=>e.value[y]=k,index:y,total:e.value.length,onRemove:k=>t(y),disabled:l.disabled},null,8,["webhook","onUpdate:webhook","index","total","onRemove","disabled"]))),256))])}}},Ln=s("i",{class:"pi pi-whatsapp"},null,-1),An={class:"mb-2"},Rn={class:"field"},Un={for:"server"},En={key:0,class:"p-invalid"},On={class:"field"},jn={for:"name"},Mn={key:0,class:"mb-4"},Nn={class:"mb-3"},Bn={class:"flex flex-column gap-2"},Pn={href:"https://waha.devlike.pro/docs/engines/noweb",target:"_blank"},qn={class:"flex gap-2"},Wn={key:1,class:"mb-4"},Hn={class:"mb-3"},Fn={class:"flex flex-column gap-2"},zn={class:"pi pi-info-circle"},Kn={class:"field mt-4"},Gn={class:"field flex justify-content-between align-items-center"},Qn={for:"chats-filter"},Xn={class:"pi pi-info-circle"},Jn={key:0,class:"card mb-4"},Yn={class:"flex gap-2"},Zn={class:"field flex justify-content-between align-items-center"},el={for:"proxy"},sl={key:0,class:"card mb-4"},ol={class:"field"},tl={for:"proxy-server"},nl={key:0,class:"p-invalid"},ll={class:"flex gap-3"},il={class:"field w-full"},al={for:"proxy-username"},rl={class:"field w-full"},cl={for:"proxy-password"},ul={class:"field flex justify-content-between align-items-center"},dl={for:"debug"},pl={class:"w-full flex flex-column gap-2"},ml={class:"flex justify-content-end"},vl={__name:"SessionDialog",props:De({mode:String},{visible:{},visibleModifiers:{},session:{},sessionModifiers:{}}),emits:["update:visible","update:session"],setup(l){var ye,oe,ue,de,Ee,Oe,je,Me,Ne;const i=Ie(),{t:e}=H(),a=Z(l,"visible"),t=Z(l,"session"),p=l,v=M(()=>p.mode==="new"),r=M(()=>p.mode==="update"),f=M(()=>r.value),u=xe(),g=J(),y=M(()=>g.getServer(t.value.server)),k=M(()=>{var E,T;return((T=(E=y.value)==null?void 0:E.version)==null?void 0:T.engine)==="NOWEB"}),I=M(()=>{var E,T;return((T=(E=y.value)==null?void 0:E.version)==null?void 0:T.engine)==="WEBJS"}),$=b([]),w=b(!!((oe=(ye=t.value.config)==null?void 0:ye.proxy)!=null&&oe.server)),U=b(((ue=t.value.config)==null?void 0:ue.ignore)!=null),L=b(!((Ee=(de=t.value.config)==null?void 0:de.ignore)!=null&&Ee.status)),_=b(!((je=(Oe=t.value.config)==null?void 0:Oe.ignore)!=null&&je.groups)),A=b(!((Ne=(Me=t.value.config)==null?void 0:Me.ignore)!=null&&Ne.channels));ie(t,async(E,T)=>{var pe,re,$e,me,ee,X,fe,j,V,_e;w.value=(re=(pe=E==null?void 0:E.config)==null?void 0:pe.proxy)==null?void 0:re.server,$.value=ao(($e=E.config)==null?void 0:$e.metadata),U.value=((me=E==null?void 0:E.config)==null?void 0:me.ignore)!=null,L.value=!((X=(ee=E==null?void 0:E.config)==null?void 0:ee.ignore)!=null&&X.status),_.value=!((j=(fe=E==null?void 0:E.config)==null?void 0:fe.ignore)!=null&&j.groups),A.value=!((_e=(V=E==null?void 0:E.config)==null?void 0:V.ignore)!=null&&_e.channels)});const D=b(!1),C=b(!1),Q=M(()=>{const E=ve.cloneDeep(t.value.config);return w.value||(E.proxy=void 0),U.value?E.ignore={status:!L.value,groups:!_.value,channels:!A.value}:E.ignore=void 0,E.metadata=ro($.value),E}),P=M(()=>{const E={...Q.value};return k.value||delete E.noweb,I.value||delete E.webjs,{name:t.value.name,config:E}});async function q(){D.value=!0;try{C.value=!0;const E=ve.cloneDeep(P.value);await u(g.updateSession(t.value.server,t.value.name,E.config),void 0,e("sessions.failedToUpdateSession")),i.add({severity:"success",summary:e("sessions.updated"),detail:t.value.name,life:3e3})}finally{C.value=!1}t.value=void 0,W()}async function K(E){D.value=!0;try{C.value=!0;const T=ve.cloneDeep(P.value);T.start=E;const pe=await u(g.createSession(t.value.server,T),void 0,e("sessions.failedToStartSession")),re=e(E?"sessions.started":"sessions.created");i.add({severity:"success",summary:re,detail:pe.name,life:3e3})}finally{C.value=!1}t.value=void 0,W()}function W(){D.value=!1,a.value=!1}const F=M(()=>t.value.status==="STOPPED");async function ae(E){await navigator.clipboard.writeText(JSON.stringify(P.value,null,2)),E.preventDefault()}return(E,T)=>{const pe=Ue,re=fs,$e=ps,me=ce,ee=Le("font-awesome-icon"),X=_s,fe=Ye,j=Ze,V=xs,_e=Dn,Se=bs,he=G,Ge=Ce,te=Y("tooltip");return c(),R(Ge,{visible:a.value,"onUpdate:visible":T[20]||(T[20]=O=>a.value=O),modal:!0,class:"p-fluid",maximizable:""},Hs({footer:m(()=>[s("div",pl,[s("div",null,[r.value&&!F.value?(c(),R(re,{key:0,severity:"warn"},{default:m(()=>[B(d(o(e)("sessions.sessionRestartWarning",{status:t.value.status})),1)]),_:1})):S("",!0)]),s("div",ml,[n(he,{label:o(e)("common.cancel"),icon:"pi pi-times",text:"",onClick:W,severity:"secondary"},null,8,["label"]),N(n(he,{label:o(e)("sessions.copy"),text:"",tabindex:0,icon:"pi pi-copy",severity:"secondary",onClick:T[17]||(T[17]=O=>ae(O))},null,8,["label"]),[[te,{value:o(e)("sessions.copiedToClipboard")},void 0,{focus:!0,bottom:!0}]]),r.value?S("",!0):(c(),R(he,{key:0,label:o(e)("sessions.create"),icon:"pi pi-plus",text:"",onClick:T[18]||(T[18]=O=>K(!1)),loading:C.value},null,8,["label","loading"])),r.value?S("",!0):(c(),R(he,{key:1,label:o(e)("sessions.createAndStart"),icon:"pi pi-play",text:"",onClick:T[19]||(T[19]=O=>K(!0)),loading:C.value},null,8,["label","loading"])),r.value?(c(),R(he,{key:2,label:o(e)("sessions.update"),icon:"pi pi-save",text:"",onClick:q,loading:C.value},null,8,["label","loading"])):S("",!0)])])]),default:m(()=>[s("div",An,[r.value?(c(),R(re,{key:0,severity:"info"},{default:m(()=>[B(d(o(e)("sessions.changeServerOrNameInfo")),1)]),_:1})):S("",!0)]),s("div",Rn,[s("label",Un,d(o(e)("sessions.server")),1),n($e,{placeholder:o(e)("sessions.selectServer"),modelValue:t.value.server,"onUpdate:modelValue":T[0]||(T[0]=O=>t.value.server=O),showClear:!1,required:!0,invalid:D.value&&!t.value.server,disabled:f.value},null,8,["placeholder","modelValue","invalid","disabled"]),D.value&&!t.value.server?(c(),h("small",En,d(o(e)("sessions.serverRequired")),1)):S("",!0)]),s("div",On,[s("label",jn,d(o(e)("sessions.nameOptional")),1),n(me,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":T[1]||(T[1]=O=>t.value.name=O),modelModifiers:{trim:!0},required:"false",autofocus:"",placeholder:o(e)("sessions.sessionIdPlaceholder"),disabled:!v.value},null,8,["modelValue","placeholder","disabled"])]),k.value?(c(),h("div",Mn,[s("div",Nn,[s("h5",null,"🏭 "+d(o(e)("sessions.engineSettings")),1)]),n(j,{activeIndex:0},{default:m(()=>[n(fe,{header:"NOWEB"},{default:m(()=>[s("div",Bn,[s("div",null,[s("a",Pn,d(o(e)("sessions.readMoreAboutNOWEB")),1)]),s("div",null,[N((c(),R(X,{modelValue:t.value.config.noweb.markOnline,"onUpdate:modelValue":T[2]||(T[2]=O=>t.value.config.noweb.markOnline=O),onLabel:o(e)("sessions.presenceOnline"),offLabel:o(e)("sessions.presenceOffline")},{icon:m(()=>[n(ee,{icon:"fa-solid fa-sync",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])),[[te,o(e)("sessions.presenceTooltip")]])]),s("div",qn,[s("div",null,[N((c(),R(X,{modelValue:t.value.config.noweb.store.enabled,"onUpdate:modelValue":T[3]||(T[3]=O=>t.value.config.noweb.store.enabled=O),onLabel:o(e)("sessions.storeEnabled"),offLabel:o(e)("sessions.storeDisabled")},{icon:m(()=>[n(ee,{icon:"fa-solid fa-folder",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])),[[te,o(e)("sessions.storeTooltip")]])]),s("div",null,[N((c(),R(X,{modelValue:t.value.config.noweb.store.fullSync,"onUpdate:modelValue":T[4]||(T[4]=O=>t.value.config.noweb.store.fullSync=O),onLabel:o(e)("sessions.storeFullSyncOn"),offLabel:o(e)("sessions.storeFullSyncOff")},{icon:m(()=>[n(ee,{icon:"fa-solid fa-sync",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])),[[te,o(e)("sessions.storeFullSyncTooltip")]])])])])]),_:1})]),_:1})])):S("",!0),I.value?(c(),h("div",Wn,[s("div",Hn,[s("h5",null,"🏭 "+d(o(e)("sessions.engineSettings")),1)]),n(j,{activeIndex:0},{default:m(()=>[n(fe,{header:"WEBJS"},{default:m(()=>[s("div",Fn,[s("div",null,[N((c(),R(X,{modelValue:t.value.config.webjs.tagsEventsOn,"onUpdate:modelValue":T[5]||(T[5]=O=>t.value.config.webjs.tagsEventsOn=O),onLabel:o(e)("sessions.webjs.tagsEventsOnOn"),offLabel:o(e)("sessions.webjs.tagsEventsOnOff")},{icon:m(()=>[n(ee,{icon:"fa-solid fa-tag",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])),[[te,o(e)("sessions.webjs.tagsEventsOnTooltip")]])])])]),_:1})]),_:1})])):S("",!0),s("div",null,[s("div",null,[s("h5",null,[B("📝 "+d(o(e)("sessions.metadata"))+"  ",1),N(s("i",zn,null,512),[[te,o(e)("sessions.metadataTooltip")]])])]),n(V,{modelValue:$.value,"onUpdate:modelValue":T[6]||(T[6]=O=>$.value=O),"entity-name":o(e)("sessions.metadata"),"key-column":"key","key-column-name":o(e)("sessions.key"),prefix:"user.id."},null,8,["modelValue","entity-name","key-column-name"])]),s("div",Kn,[n(_e,{ref:"webhooks",webhooks:t.value.config.webhooks,"onUpdate:webhooks":T[7]||(T[7]=O=>t.value.config.webhooks=O)},null,8,["webhooks"])]),s("div",null,[s("div",Gn,[s("div",null,[s("h5",null,[s("label",Qn,d(o(e)("sessions.config.ignore.title")),1),B("  "),N(s("i",Xn,null,512),[[te,o(e)("sessions.config.ignore.tooltip")]])])]),n(X,{modelValue:U.value,"onUpdate:modelValue":T[8]||(T[8]=O=>U.value=O),id:"ignore",onLabel:o(e)("sessions.config.ignore.filterOn"),offLabel:o(e)("sessions.config.ignore.filterOff")},{icon:m(()=>[n(ee,{icon:"fa-solid fa-filter",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])]),U.value?(c(),h("div",Jn,[s("div",Yn,[n(X,{modelValue:L.value,"onUpdate:modelValue":T[9]||(T[9]=O=>L.value=O),id:"include-status",onLabel:""+o(e)("sessions.config.ignore.status.title")+": "+o(e)("sessions.config.ignore.on"),offLabel:""+o(e)("sessions.config.ignore.status.title")+": "+o(e)("sessions.config.ignore.off")},null,8,["modelValue","onLabel","offLabel"]),n(X,{modelValue:_.value,"onUpdate:modelValue":T[10]||(T[10]=O=>_.value=O),id:"include-groups",onLabel:""+o(e)("sessions.config.ignore.groups.title")+": "+o(e)("sessions.config.ignore.on"),offLabel:""+o(e)("sessions.config.ignore.groups.title")+": "+o(e)("sessions.config.ignore.off")},null,8,["modelValue","onLabel","offLabel"]),n(X,{modelValue:A.value,"onUpdate:modelValue":T[11]||(T[11]=O=>A.value=O),id:"include-channels",onLabel:""+o(e)("sessions.config.ignore.channels.title")+": "+o(e)("sessions.config.ignore.on"),offLabel:""+o(e)("sessions.config.ignore.channels.title")+": "+o(e)("sessions.config.ignore.off")},null,8,["modelValue","onLabel","offLabel"])])])):S("",!0)]),s("div",null,[s("div",Zn,[s("div",null,[s("h5",null,[s("label",el,"🌐 "+d(o(e)("sessions.proxy")),1)])]),n(X,{modelValue:w.value,"onUpdate:modelValue":T[12]||(T[12]=O=>w.value=O),id:"proxy",onLabel:o(e)("sessions.proxyOn"),offLabel:o(e)("sessions.proxyOff")},{icon:m(()=>[n(ee,{icon:"fa-solid fa-server",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])]),w.value?(c(),h("div",sl,[s("div",ol,[s("label",tl,d(o(e)("sessions.server")),1),n(me,{id:"proxy-server",modelValue:t.value.config.proxy.server,"onUpdate:modelValue":T[13]||(T[13]=O=>t.value.config.proxy.server=O),modelModifiers:{trim:!0},required:"true",invalid:D.value&&!t.value.config.proxy.server,placeholder:o(e)("sessions.hostPort")},null,8,["modelValue","invalid","placeholder"]),D.value&&!t.value.config.proxy.server?(c(),h("small",nl,d(o(e)("sessions.serverRequired")),1)):S("",!0)]),s("div",ll,[s("div",il,[s("label",al,d(o(e)("sessions.usernameOptional")),1),n(me,{id:"proxy-username",modelValue:t.value.config.proxy.username,"onUpdate:modelValue":T[14]||(T[14]=O=>t.value.config.proxy.username=O),modelModifiers:{trim:!0}},null,8,["modelValue"])]),s("div",rl,[s("label",cl,d(o(e)("sessions.passwordOptional")),1),n(Se,{id:"proxy-password",modelValue:t.value.config.proxy.password,"onUpdate:modelValue":T[15]||(T[15]=O=>t.value.config.proxy.password=O),modelModifiers:{trim:!0},feedback:!1,toggleMask:""},null,8,["modelValue"])])])])):S("",!0)]),s("div",ul,[s("div",null,[s("h5",null,[s("label",dl,"🛠️ "+d(o(e)("sessions.debug")),1)])]),n(X,{modelValue:t.value.config.debug,"onUpdate:modelValue":T[16]||(T[16]=O=>t.value.config.debug=O),onLabel:o(e)("sessions.debugEnabled"),offLabel:o(e)("sessions.debugDisabled"),onIcon:"fa fa-bug"},{icon:m(()=>[n(ee,{icon:"fa-solid fa-bug",class:"mr-2"})]),_:1},8,["modelValue","onLabel","offLabel"])])]),_:2},[v.value?{name:"header",fn:m(()=>[s("div",null,[s("h5",null,[Ln,B(" "+d(o(e)("sessions.createSession")),1)])])]),key:"0"}:void 0,v.value?void 0:{name:"header",fn:m(()=>[s("div",null,[n(pe,{session:t.value},null,8,["session"])])]),key:"1"}]),1032,["visible"])}}},fl=["WORKING","FAILED","STARTING","SCAN_QR_CODE","STOPPED"],_l={class:"",style:{"min-width":"20rem"}},hl={class:"flex justify-content-center align-items-center"},bl=s("h5",{class:"m-0"},"QR",-1),gl={class:"m-auto w-full"},yl={class:"flex justify-content-center"},$l={key:1,style:{"background-color":"#f8f9fa",padding:"1rem",color:"red","white-space":"pre-wrap"}},wl={__name:"QRImage",props:{session:Object},setup(l){const i=J(),e=l,{data:a,pending:t,error:p,refresh:v}=qe(`session-qr-${e.session.server.id}-${e.session.name}`,async()=>(await ke(1e3),await i.getQR(e.session.server.id,e.session.name)));return(r,f)=>{const u=Re,g=cs,y=us,k=ys;return c(),h("div",_l,[s("div",hl,[bl,n(u,{onClick:o(v)},null,8,["onClick"])]),s("div",gl,[o(t)?(c(),h(z,{key:0},[n(g,{mode:"indeterminate",style:{height:"3px"}}),!o(a)&&!o(p)?(c(),R(y,{key:0,width:"100%",height:"20rem"})):S("",!0)],64)):S("",!0),s("div",yl,[o(a)?(c(),R(k,{key:0,data:o(a).data,mimetype:o(a).mimetype},null,8,["data","mimetype"])):S("",!0),o(p)?(c(),h("pre",$l,""+d(o(p).cause.response.data.message||o(p).cause.response.data||o(p))+`
  `,1)):S("",!0)])])])}}},kl={class:"pl-4"},xl=s("b",null,"WhatsApp",-1),Cl=s("i",{class:"pi pi-ellipsis-v"},null,-1),Sl=s("i",{class:"pi pi-cog"},null,-1),Vl={__name:"EnterCodeGuide",setup(l){const{t:i}=H();return(e,a)=>{const t=Le("i18n-t");return c(),h("ul",kl,[s("li",null,[n(t,{keypath:"sessions.guide.code.openWhatsApp"},{app:m(()=>[xl]),_:1})]),s("li",null,[n(t,{keypath:"sessions.guide.code.tapMoreOptions"},{options:m(()=>[s("b",null,d(o(i)("whatsapp.MoreOptions")),1),B(),Cl]),settings:m(()=>[s("b",null,d(o(i)("whatsapp.Settings")),1),B(),Sl]),_:1})]),s("li",null,[n(t,{keypath:"sessions.guide.code.tapLinkedDevices"},{linkedDevices:m(()=>[s("b",null,d(o(i)("whatsapp.LinkedDevices")),1)]),linkDevice:m(()=>[s("b",null,d(o(i)("whatsapp.LinkADevice")),1)]),_:1})]),s("li",null,[n(t,{keypath:"sessions.guide.code.linkWithPhone"},{linkWithPhone:m(()=>[s("b",null,d(o(i)("sessions.guide.code.linkWithPhoneText")),1)]),_:1})])])}}},Tl={class:"flex flex-column gap-2 mt-4"},Il={class:"flex justify-content-between gap-2"},Dl={class:"field"},Ll={class:"card flex justify-content-center align-items-center"},Al={class:"mx-1",style:{"font-size":"2rem"}},Rl={__name:"PairingCodeSteps",props:["session"],setup(l){const i=l,e=b(null),a=b(!1),t=b("XXXX-XXXX"),p=xe(),v=J(),{t:r}=H();function f(g){return g.replace(/\D/g,"")}async function u(){e.value=f(e.value),a.value=!0;try{await ke(1e3);const g=await p(v.getPairingCode(i.session.server.id,i.session.name,e.value),r("sessions.guide.code.requestSent"),r("sessions.guide.code.failedToRequestCode"),i.session.name,i.session.name);t.value=g.code}finally{a.value=!1}}return ie(e,ve.debounce(g=>{e.value=f(g)},1e3)),(g,y)=>{const k=ce,I=G,$=vs;return c(),h(z,null,[s("div",Tl,[s("form",{onSubmit:is(u,["prevent"])},[s("div",Il,[s("div",Dl,[n(k,{id:"phone","input-id":"phone",name:"phone",modelValue:o(e),"onUpdate:modelValue":y[0]||(y[0]=w=>We(e)?e.value=w:null),modelModifiers:{trim:!0},useGrouping:!1,required:"true",autofocus:"",placeholder:o(r)("sessions.guide.code.phonePlaceholder")},null,8,["modelValue","placeholder"])]),s("div",null,[n(I,{type:"submit",label:o(r)("sessions.guide.code.showCode"),icon:"pi pi-send",loading:o(a)},null,8,["label","loading"])])])],32)]),o(t)?(c(),h(z,{key:0},[n($),s("div",null,[n(Vl)]),s("div",Ll,[s("div",null,[o(t)?(c(!0),h(z,{key:0},Te(o(t),w=>(c(),h("span",Al,d(w),1))),256)):S("",!0)])])],64)):S("",!0)],64)}}},Ul={class:"pl-4"},El=s("b",null,"WhatsApp",-1),Ol=s("i",{class:"pi pi-ellipsis-v"},null,-1),jl=s("i",{class:"pi pi-cog"},null,-1),Ml={__name:"ScanQRCodeGuide",setup(l){const{t:i}=H();return(e,a)=>{const t=Le("i18n-t");return c(),h("ul",Ul,[s("li",null,[n(t,{keypath:"sessions.guide.qr.openWhatsApp"},{app:m(()=>[El]),_:1})]),s("li",null,[n(t,{keypath:"sessions.guide.qr.tapMoreOptions"},{options:m(()=>[s("b",null,d(o(i)("whatsapp.MoreOptions")),1),B(),Ol]),settings:m(()=>[s("b",null,d(o(i)("whatsapp.Settings")),1),B(),jl]),_:1})]),s("li",null,[n(t,{keypath:"sessions.guide.qr.tapLinkedDevices"},{linkedDevices:m(()=>[s("b",null,d(o(i)("whatsapp.LinkedDevices")),1)]),linkDevice:m(()=>[s("b",null,d(o(i)("whatsapp.LinkADevice")),1)]),_:1})]),s("li",null,[n(t,{keypath:"sessions.guide.qr.pointPhone"},{qrCode:m(()=>[s("b",null,d(o(i)("sessions.qr")),1)]),_:1})])])}}},Nl=s("i",{class:"pi pi-qrcode mr-2"},null,-1),Bl=s("i",{class:"pi pi-send mr-2"},null,-1),Pl=["innerHTML"],ql={__name:"SessionLoginDialog",props:De(["session"],{visible:{},visibleModifiers:{}}),emits:["update:visible"],setup(l){const i=Z(l,"visible"),{t:e}=H();return(a,t)=>{const p=Le("i18n-t"),v=lo,r=io,f=Ce;return c(),R(f,{visible:i.value,"onUpdate:visible":t[0]||(t[0]=u=>i.value=u),modal:!0,class:"p-fluid",maximizable:""},{header:m(()=>[n(Ue,{session:l.session},null,8,["session"])]),default:m(()=>[n(r,null,{default:m(()=>[n(v,null,{header:m(()=>[Nl,B(" "+d(o(e)("sessions.scanQRTab")),1)]),default:m(()=>[n(p,{keypath:"sessions.scanQRCode",tag:"p"},{qr:m(()=>[s("b",null,d(o(e)("sessions.qr")),1)]),_:1}),n(Ml),s("div",null,[n(wl,{session:l.session},null,8,["session"])])]),_:1}),n(v,null,{header:m(()=>[Bl,B(" "+d(o(e)("sessions.enterCodeTab")),1)]),default:m(()=>[s("p",{innerHTML:o(e)("sessions.enterPhoneNumber"),class:"m-0"},null,8,Pl),s("div",null,[n(Rl,{session:l.session},null,8,["session"])])]),_:1})]),_:1})]),_:1},8,["visible"])}}},Wl={__name:"SessionLogin",props:["session"],setup(l){const{t:i}=H(),e=b(!1);return(a,t)=>{const p=G,v=Y("tooltip");return c(),h(z,null,[N(n(p,{icon:"pi pi-sign-in",severity:"",rounded:"",outlined:"",onClick:t[0]||(t[0]=r=>e.value=!0),disabled:l.session.status!=="SCAN_QR_CODE"},null,8,["disabled"]),[[v,o(i)("sessions.login"),void 0,{top:!0}]]),n(ql,{visible:o(e),"onUpdate:visible":t[1]||(t[1]=r=>We(e)?e.value=r:null),session:l.session},null,8,["visible","session"])],64)}}},Hl={class:"chatwoot-config"},Fl={class:"field"},zl={for:"url"},Kl={key:0,class:"p-error"},Gl={class:"grid"},Ql={class:"col-6"},Xl={class:"field"},Jl={for:"accountId"},Yl={key:0,class:"p-error"},Zl={class:"col-6"},ei={class:"field"},si={for:"accountToken"},oi={key:0,class:"p-error"},ti={class:"grid"},ni={class:"col-6"},li={class:"field"},ii={for:"inboxId"},ai={class:"pi pi-info-circle"},ri={key:0,class:"p-error"},ci={class:"col-6"},ui={class:"field"},di={for:"inboxIdentifier"},pi={key:0,class:"p-error"},mi={class:"field"},vi={for:"locale"},fi={class:"pi pi-info-circle"},_i={key:0,class:"p-error"},hi=Fe({__name:"AppConfigChatWoot",props:{modelValue:{type:Object,required:!0},server:{type:Object,required:!0},submitted:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:i}){const{t:e}=H(),a=l,t=i,p=J(),v=xe(),r=M({get:()=>a.modelValue||{url:"",accountId:0,accountToken:"",inboxId:0,inboxIdentifier:"",locale:"en-US"},set:y=>t("update:modelValue",y)}),f=b([]),u=b(!1);He(async()=>{await g()});async function g(){if(!(!a.server||!a.server.id))try{u.value=!0,f.value=await v(p.getAppChatWootLocales(a.server.id),void 0,e("apps.chatwoot.failedToLoadLocales"))}catch(y){console.error("Error loading locales:",y)}finally{u.value=!1}}return(y,k)=>{const I=ce,$=hs,w=bs,U=Ae,L=Y("tooltip");return c(),h("div",Hl,[s("div",Fl,[s("label",zl,d(o(e)("apps.chatwoot.url")),1),n(I,{id:"url",modelValue:r.value.url,"onUpdate:modelValue":k[0]||(k[0]=_=>r.value.url=_),placeholder:"https://app.chatwoot.com",class:le({"p-invalid":l.submitted&&!r.value.url})},null,8,["modelValue","class"]),l.submitted&&!r.value.url?(c(),h("small",Kl,d(o(e)("apps.chatwoot.urlRequired")),1)):S("",!0)]),s("div",Gl,[s("div",Ql,[s("div",Xl,[s("label",Jl,d(o(e)("apps.chatwoot.accountId")),1),n($,{id:"accountId",modelValue:r.value.accountId,"onUpdate:modelValue":k[1]||(k[1]=_=>r.value.accountId=_),placeholder:o(e)("apps.chatwoot.accountIdPlaceholder"),class:le({"p-invalid":l.submitted&&!r.value.accountId})},null,8,["modelValue","placeholder","class"]),l.submitted&&!r.value.accountId?(c(),h("small",Yl,d(o(e)("apps.chatwoot.accountIdRequired")),1)):S("",!0)])]),s("div",Zl,[s("div",ei,[s("label",si,d(o(e)("apps.chatwoot.accountToken")),1),n(w,{id:"accountToken",modelValue:r.value.accountToken,"onUpdate:modelValue":k[2]||(k[2]=_=>r.value.accountToken=_),placeholder:o(e)("apps.chatwoot.accountTokenPlaceholder"),feedback:!1,toggleMask:"",class:le({"p-invalid":l.submitted&&!r.value.accountToken})},null,8,["modelValue","placeholder","class"]),l.submitted&&!r.value.accountToken?(c(),h("small",oi,d(o(e)("apps.chatwoot.accountTokenRequired")),1)):S("",!0)])])]),s("div",ti,[s("div",ni,[s("div",li,[s("label",ii,[B(d(o(e)("apps.chatwoot.inboxId"))+" ",1),N(s("i",ai,null,512),[[L,o(e)("apps.chatwoot.inboxIdTooltip")]])]),n($,{id:"inboxId",modelValue:r.value.inboxId,"onUpdate:modelValue":k[3]||(k[3]=_=>r.value.inboxId=_),placeholder:o(e)("apps.chatwoot.inboxIdPlaceholder"),class:le({"p-invalid":l.submitted&&!r.value.inboxId})},null,8,["modelValue","placeholder","class"]),l.submitted&&!r.value.inboxId?(c(),h("small",ri,d(o(e)("apps.chatwoot.inboxIdRequired")),1)):S("",!0)])]),s("div",ci,[s("div",ui,[s("label",di,d(o(e)("apps.chatwoot.inboxIdentifier")),1),n(w,{id:"inboxIdentifier",modelValue:r.value.inboxIdentifier,"onUpdate:modelValue":k[4]||(k[4]=_=>r.value.inboxIdentifier=_),placeholder:o(e)("apps.chatwoot.inboxIdentifierPlaceholder"),feedback:!1,toggleMask:"",class:le({"p-invalid":l.submitted&&!r.value.inboxIdentifier})},null,8,["modelValue","placeholder","class"]),l.submitted&&!r.value.inboxIdentifier?(c(),h("small",pi,d(o(e)("apps.chatwoot.inboxIdentifierRequired")),1)):S("",!0)])])]),s("div",mi,[s("label",vi,[B(d(o(e)("apps.chatwoot.language"))+" ",1),N(s("i",fi,null,512),[[L,o(e)("apps.chatwoot.languageTooltip")]])]),n(U,{id:"locale",modelValue:r.value.locale,"onUpdate:modelValue":k[5]||(k[5]=_=>r.value.locale=_),options:f.value,optionLabel:"name",optionValue:"locale",placeholder:o(e)("apps.chatwoot.selectLocale"),loading:u.value,class:le({"p-invalid":l.submitted&&!r.value.locale})},null,8,["modelValue","options","placeholder","loading","class"]),l.submitted&&!r.value.locale?(c(),h("small",_i,d(o(e)("apps.chatwoot.languageRequired")),1)):S("",!0)])])}}}),bi=ge(hi,[["__scopeId","data-v-2afcedfb"]]),gi={class:"chatwoot-faq"},yi={class:"mb-3"},$i={href:"https://waha.devlike.pro/docs/apps/chatwoot",target:"_blank"},wi={class:"mb-4"},ki={class:"mb-1"},xi={class:"p-inputgroup mb-1"},Ci={class:"p-message-secondary"},Si={class:"mt-4"},Vi={class:"p-inputgroup"},Ti=Fe({__name:"AppFAQChatWoot",props:{app:{type:Object,required:!0},session:{type:String,required:!0}},setup(l){const{t:i}=H(),e=l,a=M(()=>`/webhooks/chatwoot/${e.session}/${e.app.id}`),t=M(()=>`http://waha:3000${a.value}`),p=M(()=>`{WAHA_BASE_URL}${a.value}`);async function v(){await navigator.clipboard.writeText(p.value)}async function r(){await navigator.clipboard.writeText(t.value)}return(f,u)=>{const g=Ye,y=ce,k=G,I=Ze,$=Y("tooltip");return c(),h("div",gi,[n(I,{multiple:!0,activeIndex:[1]},{default:m(()=>[n(g,{header:o(i)("apps.chatwoot.aboutApp")},{default:m(()=>[s("div",yi,[s("a",$i,d(o(i)("apps.chatwoot.learnMore")),1)])]),_:1},8,["header"]),n(g,{header:o(i)("apps.chatwoot.webhookUrl")},{default:m(()=>[s("div",wi,[s("p",ki,d(o(i)("apps.chatwoot.useWebhookUrl")),1),s("div",xi,[n(y,{value:p.value,disabled:"",placeholder:o(i)("apps.chatwoot.webhookUrlPlaceholder")},null,8,["value","placeholder"]),N(n(k,{label:o(i)("apps.chatwoot.copy"),icon:"pi pi-copy",onClick:v},null,8,["label"]),[[$,{value:o(i)("apps.chatwoot.copiedToClipboard")},void 0,{focus:!0,bottom:!0}]])]),s("small",Ci,d(o(i)("apps.chatwoot.replaceBaseUrl")),1)]),s("div",Si,[s("p",null,d(o(i)("apps.chatwoot.exampleSetup")),1),s("div",Vi,[n(y,{value:t.value,disabled:"",placeholder:o(i)("apps.chatwoot.exampleUrlPlaceholder")},null,8,["value","placeholder"]),N(n(k,{label:o(i)("apps.chatwoot.copy"),icon:"pi pi-copy",onClick:r},null,8,["label"]),[[$,{value:o(i)("apps.chatwoot.copiedToClipboard")},void 0,{focus:!0,bottom:!0}]])])])]),_:1},8,["header"])]),_:1})])}}}),Ii=ge(Ti,[["__scopeId","data-v-68901460"]]),Di="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_378_9639)'%3e%3cpath%20d='M12%2024C18.6274%2024%2024%2018.6274%2024%2012C24%205.37258%2018.6274%200%2012%200C5.37258%200%200%205.37258%200%2012C0%2018.6274%205.37258%2024%2012%2024Z'%20fill='%232781F6'%3e%3c/path%3e%3cpath%20d='M17.1256%2017.1258H11.5622C8.4955%2017.1258%205.99976%2014.6299%205.99976%2011.5624C5.99976%208.49591%208.4955%206%2011.5623%206C14.6298%206%2017.1256%208.49591%2017.1256%2011.5624V17.1258Z'%20fill='white'%20stroke='white'%20stroke-width='0.28125'%3e%3c/path%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_378_9639'%3e%3crect%20width='24'%20height='24'%20fill='white'%3e%3c/rect%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Cs=l=>(Fs("data-v-50742726"),l=l(),zs(),l),Li={class:"chatwoot-label"},Ai=Cs(()=>s("img",{src:Di,alt:"ChatWoot Icon",class:"chatwoot-icon"},null,-1)),Ri=Cs(()=>s("span",null,"ChatWoot",-1)),Ui=[Ai,Ri],Ei={__name:"ChatWootLabel",setup(l){return(i,e)=>(c(),h("span",Li,Ui))}},Qe=ge(Ei,[["__scopeId","data-v-50742726"]]),Oi={class:"app-edit"},ji={class:"field"},Mi={for:"id"},Ni={key:0,class:"p-error"},Bi={class:"field"},Pi={for:"app-type"},qi={key:0},Wi={key:1},Hi={key:0,class:"p-error"},Fi={key:0,class:"field"},zi={class:"card app-config"},Ki=Fe({__name:"AppEdit",props:{modelValue:{type:Object,required:!0},server:{type:Object,required:!0},visible:{type:Boolean,default:!1},isNewApp:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:modelValue","update:visible","save","cancel"],setup(l,{emit:i}){const{t:e}=H(),a=l,t=M({get:()=>a.visible,set:I=>v("update:visible",I)}),p=M(()=>!a.modelValue.id),v=i;J(),xe();const r=M({get:()=>a.modelValue,set:I=>v("update:modelValue",I)}),f=b([{name:"ChatWoot",value:"chatwoot",label:"chatwoot"}]),u=b(!1);ie(()=>r.value,I=>{I.id||(r.value={...I,id:g()})},{immediate:!0});function g(){return gs()}function y(){if(u.value=!0,!(!r.value.id||!r.value.app||!r.value.session)){if(r.value.app==="chatwoot"){const I=r.value.config;if(!I||!I.url||!I.accountId||!I.accountToken||!I.inboxId||!I.inboxIdentifier||!I.locale)return}v("save",r.value)}}function k(){u.value=!1,v("update:visible",!1),v("cancel")}return(I,$)=>{const w=ce,U=Ae,L=G,_=Ce;return c(),R(_,{visible:t.value,"onUpdate:visible":$[3]||($[3]=A=>t.value=A),modal:!0,class:"p-fluid",header:a.isNewApp?o(e)("apps.addAppTitle"):o(e)("apps.editAppTitle")},{footer:m(()=>[n(L,{label:o(e)("apps.cancel"),icon:"pi pi-times",onClick:k,text:"",severity:"secondary"},null,8,["label"]),n(L,{label:p.value?o(e)("apps.add"):o(e)("apps.save"),icon:p.value?"pi pi-plus":"pi pi-check",onClick:y,loading:a.loading,text:""},null,8,["label","icon","loading"])]),default:m(()=>[s("div",Oi,[s("div",ji,[s("label",Mi,[s("b",null,d(o(e)("apps.appId")),1)]),n(w,{id:"id",modelValue:r.value.id,"onUpdate:modelValue":$[0]||($[0]=A=>r.value.id=A),disabled:!a.isNewApp,placeholder:"Automatically generated"},null,8,["modelValue","disabled"]),u.value&&!r.value.id?(c(),h("small",Ni,d(o(e)("apps.appIdRequired")),1)):S("",!0)]),s("div",Bi,[s("label",Pi,[s("b",null,d(o(e)("apps.appType")),1)]),n(U,{id:"app-type",modelValue:r.value.app,"onUpdate:modelValue":$[1]||($[1]=A=>r.value.app=A),options:f.value,optionLabel:"name",optionValue:"value",placeholder:o(e)("apps.selectAppType"),class:le({"p-invalid":u.value&&!r.value.app}),disabled:!a.isNewApp},{value:m(A=>[A.value?(c(),h("div",qi,[A.value==="chatwoot"?(c(),R(Qe,{key:0})):S("",!0)])):(c(),h("span",Wi,d(A.placeholder),1))]),option:m(A=>[A.option.value==="chatwoot"?(c(),R(Qe,{key:0})):S("",!0)]),_:1},8,["modelValue","options","placeholder","class","disabled"]),u.value&&!r.value.app?(c(),h("small",Hi,d(o(e)("apps.appTypeRequired")),1)):S("",!0)]),r.value.app?(c(),h("div",Fi,[s("label",null,[s("b",null,d(o(e)("apps.appFAQ")),1)]),r.value.app==="chatwoot"?(c(),R(Ii,{key:0,app:r.value,session:r.value.session||""},null,8,["app","session"])):S("",!0),s("label",null,[s("b",null,d(o(e)("apps.appConfiguration")),1)]),s("div",zi,[r.value.app==="chatwoot"?(c(),R(bi,{key:0,modelValue:r.value.config,"onUpdate:modelValue":$[2]||($[2]=A=>r.value.config=A),server:l.server,submitted:u.value},null,8,["modelValue","server","submitted"])):S("",!0)])])):S("",!0)])]),_:1},8,["visible","header"])}}}),Gi=ge(Ki,[["__scopeId","data-v-9060dc62"]]),Qi={class:"app-list"},Xi={class:"flex justify-content-between align-items-center w-full mb-2"},Ji={class:"mb-0"},Yi={class:"pi pi-info-circle"},Zi={class:"text-center p-4"},ea={class:"flex gap-2 justify-content-end"},sa=Fe({__name:"AppList",props:{server:Object,session:Object,isNewSession:{type:Boolean,default:!1}},setup(l){const i=Ie(),e=ls(),a=J(),t=xe(),{t:p}=H(),v=l,r=b([]),f=b(!1),u=b(!1),g=b(null),y=b(!1);He(async()=>{await k()}),ie(()=>[v.server,v.session],async()=>{await k()},{deep:!0});async function k(){if(!v.server||!v.session||!v.session.name){r.value=[];return}try{f.value=!0,r.value=await t(a.getApps(v.server.id,v.session.name),void 0,p("apps.failedToLoad"))}catch(D){console.error("Error loading apps:",D)}finally{f.value=!1}}function I(){if(v.isNewSession){i.add({severity:"info",summary:"Info",detail:p("apps.createSessionFirst"),life:3e3});return}g.value={id:L(),session:v.session.name,app:"chatwoot",config:{}},y.value=!0,u.value=!0}function $(D){g.value={...D},y.value=!1,u.value=!0}function w(D,C){const Q=A(D.app);e.require({target:C.currentTarget,message:p("apps.deleteConfirm",{appType:Q,id:D.id}),icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined p-button-sm",acceptClass:"p-button-danger p-button-sm",rejectLabel:p("apps.no"),acceptLabel:p("apps.yesDelete"),accept:async()=>{await U(D)},reject:()=>{}})}async function U(D){try{await t(a.deleteApp(v.server.id,D.id),void 0,p("apps.failedToDelete"));const C=A(D.app);i.add({severity:"success",summary:p("apps.deleted"),detail:`${C} (${D.id})`,life:3e3}),await k()}catch(C){console.error("Error deleting app:",C)}}function L(){return gs()}async function _(D){try{const C=A(D.app);return y.value?(await t(a.createApp(v.server.id,D),void 0,p("apps.failedToCreate")),i.add({severity:"success",summary:p("apps.created"),detail:`${C} (${D.id})`,life:3e3})):(await t(a.updateApp(v.server.id,D),void 0,p("apps.failedToUpdate")),i.add({severity:"success",summary:p("apps.updated"),detail:`${C} (${D.id})`,life:3e3})),await k(),u.value=!1,!0}catch(C){return console.error("Error saving app:",C),!1}}function A(D){switch(D){case"chatwoot":return"ChatWoot";default:return D}}return(D,C)=>{const Q=G,P=ze,q=Ke,K=Je,W=Y("tooltip");return c(),h("div",Qi,[s("div",Xi,[s("div",null,[s("h5",Ji,[B(d(o(p)("apps.title"))+" ",1),N(s("i",Yi,null,512),[[W,o(p)("apps.builtInIntegrations")]])])]),s("div",null,[n(Q,{label:o(p)("apps.addApp"),icon:"pi pi-plus",onClick:I,severity:"success",text:""},null,8,["label"])])]),n(q,{value:r.value,loading:f.value,dataKey:"id",paginator:r.value.length>10,rows:10,showGridlines:""},{empty:m(()=>[s("div",Zi,d(o(p)("apps.noAppsFound")),1)]),default:m(()=>[n(P,{field:"app",header:o(p)("apps.appType")},{body:m(({data:F})=>[F.app==="chatwoot"?(c(),R(Qe,{key:0})):(c(),h(z,{key:1},[B(d(A(F.app)),1)],64))]),_:1},8,["header"]),n(P,{field:"id",header:o(p)("apps.id")},null,8,["header"]),n(P,{style:{width:"10rem","text-align":"right"}},{body:m(({data:F})=>[s("div",ea,[N(n(Q,{icon:"pi pi-pencil",onClick:ae=>$(F),outlined:"",rounded:"",severity:"success"},null,8,["onClick"]),[[W,o(p)("apps.editApp"),void 0,{top:!0}]]),N(n(Q,{icon:"pi pi-trash",onClick:ae=>w(F,ae),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"]),[[W,o(p)("apps.deleteApp"),void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading","paginator"]),n(K),g.value?(c(),R(Gi,{key:0,modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=F=>g.value=F),server:l.server,visible:u.value,"onUpdate:visible":C[1]||(C[1]=F=>u.value=F),isNewApp:y.value,loading:f.value,onSave:_,onCancel:C[2]||(C[2]=F=>u.value=!1)},null,8,["modelValue","server","visible","isNewApp","loading"])):S("",!0)])}}}),oa=ge(sa,[["__scopeId","data-v-5dee10f9"]]),ta={class:"w-full flex flex-column gap-2"},na={key:0},la=["innerHTML"],ia={class:"flex justify-content-end"},aa={__name:"AppsDialog",props:{visible:{},visibleModifiers:{},session:{},sessionModifiers:{},server:{},serverModifiers:{}},emits:["update:visible","update:session","update:server"],setup(l){const{t:i}=H(),e=Z(l,"visible"),a=Z(l,"session"),t=Z(l,"server"),p=M(()=>a.value.status==="STOPPED");function v(){e.value=!1}return(r,f)=>{const u=G,g=Ce;return c(),R(g,{visible:e.value,"onUpdate:visible":f[0]||(f[0]=y=>e.value=y),modal:!0,class:"p-fluid",maximizable:"",style:{"min-width":"50%"}},{header:m(()=>[n(Ue,{session:a.value},null,8,["session"])]),footer:m(()=>[s("div",ta,[p.value?S("",!0):(c(),h("div",na,[n(o(fs),{severity:"warn"},{default:m(()=>[s("span",{innerHTML:o(i)("apps.sessionStatusWarning",{status:a.value.status})},null,8,la)]),_:1})])),s("div",ia,[n(u,{label:o(i)("apps.close"),icon:"pi pi-times",text:"",onClick:v,severity:"secondary"},null,8,["label"])])])]),default:m(()=>[n(oa,{server:t.value,session:a.value,isNewSession:!1},null,8,["server","session"])]),_:1},8,["visible"])}}},ra={class:"flex justify-content-between"},ca={class:"flex align-items-center gap-1"},ua=s("i",{class:"pi pi-whatsapp"},null,-1),da={class:"mr-1"},pa=["disabled"],ma=s("i",{class:"pi pi-refresh"},null,-1),va=[ma],fa={class:"flex justify-content-between flex-column sm:flex-row gap-2 sm:gap-0"},_a={class:"flex flex-column"},ha={class:"flex justify-content-between flex-column sm:flex-row gap-2 sm:gap-2"},ba={style:{"text-align":"left"},class:"flex flex-column"},ga={class:"text-center"},ya={class:"flex gap-2"},$a={class:"my-auto"},wa={key:0,class:"pi pi-info-circle text-orange-400"},ka={class:"flex flex-row gap-2 justify-content-end",style:{order:"2"}},lr={__name:"SessionTable",setup(l){const i=Ie(),{t:e}=H(),a=J(),{visibleSessions:t,refreshing:p,servers:v}=Xe(a),r=b({config:{webhooks:[]}}),f=b(!1),u=b(void 0),g=b(!1),y=b(!1),k=b(!1),I=b(null),$=b(10);b(null);const w=b({}),U=b(null),L=b([]),_=M(()=>L.value.filter(j=>q.value[`session-action-${j.server.id}-${j.name}`])),A=b(!1),D=b(!1),C=b(!1),Q=b(!1),P=b(!1),q=b({});function K(j,V){switch(j){case"startSession":A.value=V;break;case"restartSession":D.value=V;break;case"stopSession":C.value=V;break;case"logoutSession":Q.value=V;break;case"deleteSession":P.value=V;break}}async function W(j){K(j,!0);try{for(const V of _.value)await q.value[`session-action-${V.server.id}-${V.name}`][j]()}finally{K(j,!1)}}Ks(()=>{q.value=[]}),Gs(()=>{T()});const F=b([{field:"name",header:e("sessions.name")},{field:"metadata",header:e("sessions.metadata")},{field:"me",header:e("sessions.me")},{field:"status",header:e("sessions.status")},{field:"server",header:e("sessions.server")}]);function ae(){return JSON.parse(localStorage.getItem("sessions.table.columns.hidden"))||[]}const ye=ae(),oe=b(ve.differenceBy(F.value,ye,"field")),ue=j=>{oe.value=F.value.filter(V=>j.includes(V))};function de(j){return!oe.value||oe.value.length===0?!0:ve.find(oe.value,{field:j})}const Ee=M(()=>de("name")),Oe=M(()=>de("metadata")),je=M(()=>de("me")),Me=M(()=>de("status")),Ne=M(()=>de("server")),E=M(()=>ve.differenceBy(F.value,oe.value,"field"));ie(()=>E.value,j=>{localStorage.setItem("sessions.table.columns.hidden",JSON.stringify(j))},{deep:!0});const T=()=>{w.value={global:{value:null,matchMode:Ve.CONTAINS},status:{value:null,matchMode:Ve.EQUALS},"server.id":{value:null,matchMode:Ve.EQUALS},name:{value:null,matchMode:Ve.CONTAINS},"me.id":{value:null,matchMode:Ve.CONTAINS}}};function pe(){const j=v.value.find(V=>V.connected);if(!j){i.add({severity:"error",summary:e("sessions.noConnectedServer"),detail:e("sessions.pleaseConnectToServerFirst"),life:3e3});return}r.value={server:j.id,name:"",config:{metadata:{},webhooks:[],noweb:{markOnline:!0,store:{enabled:!0,fullSync:!1}},webjs:{tagsEventsOn:!1},ignore:null,proxy:{}}},u.value="new",f.value=!0}function re(j){r.value=ve.cloneDeep({name:j.name,status:j.status,server:j.server.id,config:j.config}),u.value="update",f.value=!0}function $e(){qe("store",async()=>await a.refresh())}function me(j){g.value=!0,r.value=j}function ee(j){r.value=j,y.value=!0}function X(j){r.value=j,I.value=j.server,k.value=!0}ie(y,j=>{j||(r.value={config:{webhooks:[]}})});const fe=M(()=>["name","me.id","me.pushName","_metadata"]);return(j,V)=>{const _e=ns,Se=G,he=vo,Ge=Qs,te=ce,O=Xs,Ss=as,be=ze,Vs=ho,Ts=es,Is=Vo,ss=ds,Ds=Ae,Ls=ps,As=ws,Rs=Do,Us=Ke,Es=Je,Os=gt,js=Qt,Ms=vl,Be=Y("tooltip");return c(),h(z,null,[s("div",ra,[s("div",null,[s("h5",ca,[ua,s("span",da,d(o(e)("sessions.title")),1),n(_e,{refreshing:o(p)},null,8,["refreshing"])])]),s("div",null,[N((c(),h("button",{onClick:$e,class:"p-link layout-topbar-button",disabled:o(p)},va,8,pa)),[[Be,o(e)("sessions.refresh"),void 0,{top:!0}]])])]),n(Us,{selection:L.value,"onUpdate:selection":V[8]||(V[8]=x=>L.value=x),value:o(t).length>0?o(t):[],paginator:!0,rows:$.value,rowsPerPageOptions:[5,10,20,50,100,500],dataKey:x=>`${x.server.id}-${x.name}`,rowHover:!0,filters:w.value,"onUpdate:filters":V[9]||(V[9]=x=>w.value=x),filterDisplay:"row",loading:U.value,globalFilterFields:o(fe),showGridlines:"",style:{"white-space":"nowrap"},sortField:"name",sortOrder:1,resizableColumns:""},{header:m(()=>[s("div",fa,[s("div",_a,[n(Se,{label:o(e)("sessions.startNew"),icon:"pi pi-play",severity:"success",onClick:pe},null,8,["label"])]),s("div",ha,[n(he),s("div",null,[n(O,{iconPosition:"left"},{default:m(()=>[n(Ge,{class:"pi pi-search"}),n(te,{modelValue:w.value.global.value,"onUpdate:modelValue":V[0]||(V[0]=x=>w.value.global.value=x),placeholder:o(e)("sessions.searchByNamePhoneMetadata"),style:{width:"100%"}},null,8,["modelValue","placeholder"])]),_:1})]),s("div",ba,[n(Ss,{placeholder:o(e)("sessions.columns"),modelValue:oe.value,options:F.value,optionLabel:"header",selectedItemsLabel:o(e)("sessions.columns"),maxSelectedLabels:0,"onUpdate:modelValue":ue},null,8,["placeholder","modelValue","options","selectedItemsLabel"])])])])]),empty:m(()=>[B(d(o(e)("sessions.noSessionsFound")),1)]),loading:m(()=>[B(d(o(e)("sessions.loadingSessions")),1)]),default:m(()=>[n(be,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(Ee)?(c(),R(be,{key:0,field:"name",header:o(e)("sessions.name"),"show-filter-menu":!1,sortable:""},{filter:m(({filterModel:x,filterCallback:se})=>[n(te,{modelValue:w.value.name.value,"onUpdate:modelValue":V[1]||(V[1]=ne=>w.value.name.value=ne),type:"text",placeholder:o(e)("sessions.session")},null,8,["modelValue","placeholder"])]),_:1},8,["header"])):S("",!0),o(Oe)?(c(),R(be,{key:1,header:o(e)("sessions.metadata")},{body:m(({data:x})=>{var se;return[n(Vs,{metadata:(se=x.config)==null?void 0:se.metadata},null,8,["metadata"])]}),_:1},8,["header"])):S("",!0),o(je)?(c(),R(be,{key:2,header:o(e)("sessions.me")},{body:m(({data:x})=>[s("div",ga,[n(Ts,{session:x},null,8,["session"])])]),filter:m(({filterModel:x,filterCallback:se})=>[n(te,{modelValue:w.value["me.id"].value,"onUpdate:modelValue":V[2]||(V[2]=ne=>w.value["me.id"].value=ne),type:"text",placeholder:o(e)("sessions.mePhoneNumber")},null,8,["modelValue","placeholder"])]),_:1},8,["header"])):S("",!0),o(Me)?(c(),R(be,{key:3,field:"status",header:o(e)("sessions.status"),showFilterMenu:!1,style:{width:"9rem"}},{body:m(({data:x})=>[s("div",ya,[s("div",null,[n(Wl,{session:x},null,8,["session"])]),s("div",null,[n(Is,{session:x},null,8,["session"])]),s("div",null,[N(n(Se,{icon:"pi pi-whatsapp",severity:"",rounded:"",outlined:"",disabled:x.status!=="WORKING",onClick:se=>ee(x)},null,8,["disabled","onClick"]),[[Be,o(e)("sessions.chatUI"),void 0,{top:!0}]])]),s("div",null,[N(n(Se,{icon:"pi pi-code",severity:"secondary",rounded:"",outlined:"",onClick:se=>me(x)},null,8,["onClick"]),[[Be,o(e)("sessions.sendRequest"),void 0,{top:!0}]])]),s("div",$a,[n(ss,{status:x.status},null,8,["status"])])])]),filter:m(({filterModel:x,filterCallback:se})=>[n(Ds,{modelValue:x.value,"onUpdate:modelValue":ne=>x.value=ne,options:o(fl),onChange:ne=>se(),placeholder:o(e)("sessions.any"),class:"p-column-filter",showClear:!0},{option:m(({option:ne})=>[n(ss,{status:ne},null,8,["status"])]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange","placeholder"])]),_:1},8,["header"])):S("",!0),o(Ne)?(c(),R(be,{key:4,field:"server.name",filterField:"server.id",header:o(e)("sessions.server"),showFilterMenu:!1},{filter:m(({filterModel:x,filterCallback:se})=>[n(Ls,{placeholder:o(e)("sessions.any"),onChange:ne=>se(),modelValue:x.value,"onUpdate:modelValue":ne=>x.value=ne,showClear:!0,required:!1},null,8,["placeholder","onChange","modelValue","onUpdate:modelValue"])]),body:m(({data:x})=>[B(d(x.server.name)+" ",1),x.assignedWorker&&x.server.name!==x.assignedWorker?N((c(),h("i",wa,null,512)),[[Be,`${o(e)("sessions.assignedWorkerIdDoesNotMatch")}

👉 ${o(e)("sessions.assignedWorkerId")}: ${x.assignedWorker}`]]):S("",!0)]),_:1},8,["header"])):S("",!0),n(be,{showFilterMenu:!1},{filter:m(()=>[s("div",ka,[n(As,{group:"dialog",name:`'${o(_).length}' sessions`,"all-disabled":o(_).length===0,"hide-actions":["view","apps"],"is-starting":A.value,"is-restarting":D.value,"is-stopping":C.value,"is-logging-out":Q.value,"is-removing":P.value,onStart:V[3]||(V[3]=x=>W("startSession")),onRestart:V[4]||(V[4]=x=>W("restartSession")),onStop:V[5]||(V[5]=x=>W("stopSession")),onLogout:V[6]||(V[6]=x=>W("logoutSession")),onDelete:V[7]||(V[7]=x=>W("deleteSession"))},null,8,["name","all-disabled","is-starting","is-restarting","is-stopping","is-logging-out","is-removing"])])]),body:m(({data:x})=>[n(Rs,{ref:se=>{q.value[`session-action-${x.server.id}-${x.name}`]=se},session:x,disabled:o(_).length!==0,onView:re,onApps:X},null,8,["session","disabled"])]),_:1})]),_:1},8,["selection","value","rows","dataKey","filters","loading","globalFilterFields"]),n(Es),n(Os,{visible:y.value,"onUpdate:visible":V[10]||(V[10]=x=>y.value=x),session:r.value,"onUpdate:session":V[11]||(V[11]=x=>r.value=x)},null,8,["visible","session"]),n(js,{visible:g.value,"onUpdate:visible":V[12]||(V[12]=x=>g.value=x),session:r.value,"onUpdate:session":V[13]||(V[13]=x=>r.value=x)},null,8,["visible","session"]),n(Ms,{visible:f.value,"onUpdate:visible":V[14]||(V[14]=x=>f.value=x),session:r.value,"onUpdate:session":V[15]||(V[15]=x=>r.value=x),mode:u.value},null,8,["visible","session","mode"]),n(aa,{visible:k.value,"onUpdate:visible":V[16]||(V[16]=x=>k.value=x),session:r.value,"onUpdate:session":V[17]||(V[17]=x=>r.value=x),server:I.value,"onUpdate:server":V[18]||(V[18]=x=>I.value=x)},null,8,["visible","session","server"])],64)}}};export{vo as _,lr as a};
